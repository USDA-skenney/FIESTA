<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>FIESTA - Model-Assisted Estimators • FIESTA</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="FIESTA - Model-Assisted Estimators">
<meta property="og:description" content="FIESTA">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">FIESTA</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">3.5.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/FIESTA_manual_mod_est.html">`FIESTA` Manual - Module Estimates</a>
    </li>
    <li>
      <a href="../articles/FIESTA_manual_mod_pop.html">`FIESTA` Manual - Population Data</a>
    </li>
    <li>
      <a href="../articles/FIESTA_tutorial_DB.html">FIESTA - Database Tools</a>
    </li>
    <li>
      <a href="../articles/FIESTA_tutorial_GB.html">FIESTA - Green-book Estimators</a>
    </li>
    <li>
      <a href="../articles/FIESTA_tutorial_MA.html">FIESTA - Model-Assisted Estimators</a>
    </li>
    <li>
      <a href="../articles/FIESTA_tutorial_PB.html">FIESTA - Photo-Based Module</a>
    </li>
    <li>
      <a href="../articles/FIESTA_tutorial_SA.html">FIESTA - Small Area Estimators</a>
    </li>
    <li>
      <a href="../articles/FIESTA_tutorial_dat.html">FIESTA - Data Tools</a>
    </li>
    <li>
      <a href="../articles/FIESTA_tutorial_sp.html">FIESTA - Spatial Tools</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>FIESTA - Model-Assisted Estimators</h1>
            
      
      
      <div class="hidden name"><code>FIESTA_tutorial_MA.Rmd</code></div>

    </div>

    
    
<div class="section level2">
<h2 id="model-assisted-ma-module-overview">Model-Assisted (MA) module overview<a class="anchor" aria-label="anchor" href="#model-assisted-ma-module-overview"></a>
</h2>
<p><code>FIESTA</code>’s Model-Assisted (MA) module calculates
population estimates and their sampling errors by taking advantage of
available model-assisted survey estimators from the <code>mase</code> R
package (McConville, et al. 2018). These estimators can use a variety of
auxiliary data to build models and predict over a response variable of
interest, while using a bias-correction term so that the bias of the
model does not depend on model mis-specification.</p>
<p>Functions in <code>FIESTA</code> used for fitting model-assisted
estimators include the <code>modMAarea</code> function for area
estimates and <code>modMAtree</code> for tree estimates. The
<code>modMApop</code> function is used to get population data needed for
model-assisted estimation. Below is a description and table of contents
for the sections related to these functions:</p>
<table class="table">
<colgroup>
<col width="18%">
<col width="81%">
</colgroup>
<thead><tr class="header">
<th>FUNCTION</th>
<th>DESCRIPTION</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><a href="#modMApop">modMApop</a></td>
<td>Creates population data for model-assisted estimation.</td>
</tr>
<tr class="even">
<td><a href="#modMAarea">modMAarea</a></td>
<td>Produces area level estimates through model-assisted
estimation.</td>
</tr>
<tr class="odd">
<td><a href="#modMAtree">modMAtree</a></td>
<td>Produces tree level estimates through model-assisted
estimation.</td>
</tr>
</tbody>
</table>
</div>
<div class="section level2">
<h2 id="objective-of-tutorial">Objective of tutorial<a class="anchor" aria-label="anchor" href="#objective-of-tutorial"></a>
</h2>
<p>The main objective of this tutorial is to demonstrate how to use
<code>FIESTA</code> for generating estimates using estimators from
<code>mase</code>. The model-assisted estimators can be used with FIA’s
standard state-level population data (i.e, Evaluation) from the FIA
database (FIADB) and also population data from a custom boundary.</p>
<p>The following examples are for generating estimates and estimated
variances using standard FIA Evaluation data from FIA’s National
database, with custom Estimation unit and Stratification information.
The examples use data from three inventory years of field measurements
in the state of Wyoming, from FIADB_1.7.2.00, last updated June 20,
2018, downloaded on June 25, 2018 and stored as internal data objects in
<code>FIESTA</code>.</p>
<!-- The Green-Book estimators can be used with FIA's standard state-level population data (i.e, Evaluation) from the FIA database (FIADB) and also population data from a custom boundary. The population data includes a set of FIA plot data and summarized auxiliary information for post-stratification, including a table of area by estimation unit within the population, and a table of strata proportions by estimation unit. This tutorial steps through several examples using FIESTA's Green Book module, for three different populations: (POP1) an FIA standard Evaluation, Wyoming 561301; (POP2) a custom boundary with one population, Bighorn National Forest; and (POP3) a custom boundary with sub-populations, Bighorn National Forest Districts. All examples can be used with any population, standard or custom. -->
</div>
<div class="section level2">
<h2 id="example-data---wyoming-wy-inventory-years-2011-2012">Example data - Wyoming (WY), Inventory Years 2011-2012<a class="anchor" aria-label="anchor" href="#example-data---wyoming-wy-inventory-years-2011-2012"></a>
</h2>
<details><summary>
View MA Example Data
</summary><table class="table">
<colgroup>
<col width="12%">
<col width="87%">
</colgroup>
<thead><tr class="header">
<th>Data Frame</th>
<th>Description</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>WYplt</td>
<td>WY plot-level data</td>
</tr>
<tr class="even">
<td>WYcond</td>
<td>WY condition-level data</td>
</tr>
<tr class="odd">
<td>WYtree</td>
<td>WY tree-level data</td>
</tr>
</tbody>
</table>
<table class="table">
<colgroup>
<col width="27%">
<col width="72%">
</colgroup>
<thead><tr class="header">
<th>External data</th>
<th>Description</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>WYbighorn_adminbnd.shp</td>
<td>Polygon shapefile of WY Bighorn National Forest Administrative
boundary*</td>
</tr>
<tr class="even">
<td>WYbighorn_districtbnd.shp</td>
<td>Polygon shapefile of WY Bighorn National Forest District
boundaries**</td>
</tr>
<tr class="odd">
<td>WYbighorn_forest_nonforest_250m.tif</td>
<td>GeoTIFF raster of predicted forest/nonforest (1/0) for
stratification***</td>
</tr>
<tr class="even">
<td>WYbighorn_dem_250m.img</td>
<td>Erdas Imagine raster of elevation change, in meters****</td>
</tr>
</tbody>
</table>
<p>*USDA Forest Service, Automated Lands Program (ALP). 2018.
S_USA.AdministrativeForest (<a href="http://data.fs.usda.gov/geodata/edw" class="external-link uri">http://data.fs.usda.gov/geodata/edw</a>). Description: An
area encompassing all the National Forest System lands administered by
an administrative unit. The area encompasses private lands, other
governmental agency lands, and may contain National Forest System lands
within the proclaimed boundaries of another administrative unit. All
National Forest System lands fall within one and only one Administrative
Forest Area.</p>
<p>**USDA Forest Service, Automated Lands Program (ALP). 2018.
S_USA.RangerDistrict (<a href="http://data.fs.usda.gov/geodata/edw" class="external-link uri">http://data.fs.usda.gov/geodata/edw</a>). Description: A
depiction of the boundary that encompasses a Ranger District.</p>
<p>***Based on MODIS-based classified map resampled from 250m to 500m
resolution and reclassified from 3 to 2 classes: 1:forest; 2:nonforest.
Projected in Albers Conical Equal Area, Datum NAD27 (Ruefenacht et
al. 2008). Clipped to extent of WYbighorn_adminbnd.shp.</p>
<p>****USGS National Elevation Dataset (NED), resampled from 30m
resolution to 250m. Projected in Albers Conical Equal Area, Datum NAD27
(U.S. Geological Survey 2017). Clipped to boundary of
WYbighorn_adminbnd.shp.</p>
</details><div class="section level3">
<h3 id="set-up">Set up<a class="anchor" aria-label="anchor" href="#set-up"></a>
</h3>
<p>First, you’ll need to load the <code>FIESTA</code> library:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">FIESTA</span><span class="op">)</span></span></code></pre></div>
<p>Next, you’ll need to set up an “outfolder”. This is just a file path
to a folder where you’d like <code>FIESTA</code> to send your data
output. For our purposes in this vignette, we have saved our outfolder
file path as the <code>outfolder</code> object in a temporary directory.
We also set a few default options preferred for this vignette.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">outfolder</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="get-data-for-examples">Get data for examples<a class="anchor" aria-label="anchor" href="#get-data-for-examples"></a>
</h3>
<details><summary>
View Getting Data
</summary><p>Now that we’ve loaded <code>FIESTA</code> and setup our outfolder, we
can retrieve the data needed to run the examples. First, we point to
some external data and predictor layers stored in <code>FIESTA</code>
and derive new predictor layers using the <code>raster</code>
package.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># File names for external spatial data</span></span>
<span><span class="va">WYbhfn</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"sp_data/WYbighorn_adminbnd.shp"</span>,</span>
<span>                      package <span class="op">=</span> <span class="st">"FIESTA"</span><span class="op">)</span></span>
<span><span class="va">WYbhdistfn</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"sp_data/WYbighorn_districtbnd.shp"</span>,</span>
<span>                          package <span class="op">=</span> <span class="st">"FIESTA"</span><span class="op">)</span></span>
<span></span>
<span><span class="co">## predictor variables</span></span>
<span><span class="va">fornffn</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"sp_data/WYbighorn_forest_nonforest_250m.tif"</span>,</span>
<span>                       package <span class="op">=</span> <span class="st">"FIESTA"</span><span class="op">)</span></span>
<span><span class="va">demfn</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"sp_data/WYbighorn_dem_250m.img"</span>,</span>
<span>                     package <span class="op">=</span> <span class="st">"FIESTA"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Derive new predictor layers from dem</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://rspatial.org/raster" class="external-link">raster</a></span><span class="op">)</span></span>
<span><span class="va">dem</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/raster/man/raster.html" class="external-link">raster</a></span><span class="op">(</span><span class="va">demfn</span><span class="op">)</span></span>
<span><span class="va">slp</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/terra/man/terrain.html" class="external-link">terrain</a></span><span class="op">(</span><span class="va">dem</span>,</span>
<span>               opt <span class="op">=</span> <span class="st">"slope"</span>,</span>
<span>               unit <span class="op">=</span> <span class="st">"degrees"</span>,</span>
<span>               filename <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">outfolder</span>, <span class="st">"/WYbh_slp.img"</span><span class="op">)</span>, </span>
<span>               overwrite <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="va">asp</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/terra/man/terrain.html" class="external-link">terrain</a></span><span class="op">(</span><span class="va">dem</span>,</span>
<span>               opt <span class="op">=</span> <span class="st">"aspect"</span>,</span>
<span>               unit <span class="op">=</span> <span class="st">"degrees"</span>, </span>
<span>               filename <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">outfolder</span>, <span class="st">"/WYbh_asp.img"</span><span class="op">)</span>,</span>
<span>               overwrite <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p>Next, we can get our FIA plot data and set up our auxiliary data. We
can get our FIA plot data with the <code>spMakeSpatialPoints</code>
function from <code>FIESTA</code>. For more information on how to use
this function, please see the <code>sp</code> vignette included with
<code>FIESTA</code> (link).</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">WYspplt</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/spMakeSpatialPoints.html">spMakeSpatialPoints</a></span><span class="op">(</span></span>
<span>  xyplt <span class="op">=</span> <span class="va">WYplt</span>,</span>
<span>  xy.uniqueid <span class="op">=</span> <span class="st">"CN"</span>,</span>
<span>  xvar <span class="op">=</span> <span class="st">"LON_PUBLIC"</span>,</span>
<span>  yvar <span class="op">=</span> <span class="st">"LAT_PUBLIC"</span>,</span>
<span>  prj <span class="op">=</span> <span class="st">"longlat"</span>,</span>
<span>  datum <span class="op">=</span> <span class="st">"NAD83"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">rastlst.cont</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">demfn</span>, <span class="va">slp</span>, <span class="va">asp</span><span class="op">)</span></span>
<span><span class="va">rastlst.cont.name</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"dem"</span>, <span class="st">"slp"</span>, <span class="st">"asp"</span><span class="op">)</span></span>
<span><span class="va">rastlst.cat</span> <span class="op">&lt;-</span> <span class="va">fornffn</span></span>
<span><span class="va">rastlst.cat.name</span><span class="op">=</span><span class="st">"fornf"</span></span></code></pre></div>
<p>Next, we must generate dataset for model-assisted estimation. We can
do this with the <code>spGetAuxiliary</code> function from
<code>FIESTA</code>. Again, see the <code>sp</code> vignette for further
information on this function.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">modeldat</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/spGetAuxiliary.html">spGetAuxiliary</a></span><span class="op">(</span></span>
<span>  xyplt <span class="op">=</span> <span class="va">WYspplt</span>,</span>
<span>  uniqueid <span class="op">=</span> <span class="st">"CN"</span>,</span>
<span>  unit_layer <span class="op">=</span> <span class="va">WYbhfn</span>,</span>
<span>  unitvar <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  rastlst.cont <span class="op">=</span> <span class="va">rastlst.cont</span>,</span>
<span>  rastlst.cont.name <span class="op">=</span> <span class="va">rastlst.cont.name</span>,</span>
<span>  rastlst.cat <span class="op">=</span> <span class="va">rastlst.cat</span>,</span>
<span>  rastlst.cat.name <span class="op">=</span> <span class="va">rastlst.cat.name</span>,</span>
<span>  rastlst.cont.stat <span class="op">=</span> <span class="st">"mean"</span>,</span>
<span>  asptransform <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  rast.asp <span class="op">=</span> <span class="va">asp</span>,</span>
<span>  keepNA <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  showext <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  savedata <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">modeldat</span>, max.level <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">## List of 12</span></span>
<span><span class="co">##  $ unitvar       : chr "ONEUNIT"</span></span>
<span><span class="co">##  $ pltassgn      :'data.frame':  56 obs. of  25 variables:</span></span>
<span><span class="co">##  $ pltassgnid    : chr "CN"</span></span>
<span><span class="co">##  $ unitarea      :'data.frame':  1 obs. of  2 variables:</span></span>
<span><span class="co">##  $ areavar       : chr "ACRES_GIS"</span></span>
<span><span class="co">##  $ unitzonal     :'data.frame':  1 obs. of  8 variables:</span></span>
<span><span class="co">##  $ inputdf       :Classes 'data.table' and 'data.frame': 5 obs. of  7 variables:</span></span>
<span><span class="co">##   ..- attr(*, ".internal.selfref")=&lt;externalptr&gt; </span></span>
<span><span class="co">##  $ prednames     : chr [1:5] "dem" "slp" "asp_cos" "asp_sin" ...</span></span>
<span><span class="co">##  $ zonalnames    : chr [1:7] "dem" "slp" "asp_cos" "asp_sin" ...</span></span>
<span><span class="co">##  $ predfac       : chr "fornf"</span></span>
<span><span class="co">##  $ npixelvar     : chr "npixels"</span></span>
<span><span class="co">##  $ predfac.levels:List of 1</span></span></code></pre>
</details></details>
</div>
</div>
<div class="section level2">
<h2 id="examples">Examples<a class="anchor" aria-label="anchor" href="#examples"></a>
</h2>
<div class="section level3">
<h3 id="modmapop">
<code>modMApop</code><a class="anchor" aria-label="anchor" href="#modmapop"></a>
</h3>
<div class="section level4">
<h4 id="example-1-creating-our-population-dataset-with-modmapop">Example 1: Creating our population dataset with
<code>modMApop</code><a class="anchor" aria-label="anchor" href="#example-1-creating-our-population-dataset-with-modmapop"></a>
</h4>
<details><summary>
View Example
</summary><p>We can create our population data for model-assisted estimation. To
do so, we use the <code>modMApop</code> function in <code>FIESTA</code>.
We must assign our population tables with the <code>popTabs</code>
argument (and unique identifiers for these tables with the
<code>popTabIDs</code> argument if they are not the default), the plot
assignment with the <code>pltassgn</code> argument, and in auxiliary
dataset we just created with the <code>auxdat</code> argument. The
<code>spGetAuxiliary</code> function has done much of the hard work for
us so far, so we can just run a simple call to
<code>modMApop</code>:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">MApopdat</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/modMApop.html">modMApop</a></span><span class="op">(</span>popTabs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>tree <span class="op">=</span> <span class="va">WYtree</span>, cond <span class="op">=</span> <span class="va">WYcond</span><span class="op">)</span>,</span>
<span>                     pltassgn <span class="op">=</span> <span class="va">WYpltassgn</span>,</span>
<span>                     auxdat <span class="op">=</span> <span class="va">modeldat</span><span class="op">)</span></span></code></pre></div>
<p>Note that the <code>modMApop</code> function returns a list with lots
of information and data for us to use. For a quick look at what this
list includes we can use the <code>str</code> function:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">MApopdat</span>, max.level <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">## List of 25</span></span>
<span><span class="co">##  $ popType    : chr "VOL"</span></span>
<span><span class="co">##  $ condx      :Classes 'data.table' and 'data.frame':    66 obs. of  17 variables:</span></span>
<span><span class="co">##   ..- attr(*, "sorted")= chr [1:2] "PLT_CN" "CONDID"</span></span>
<span><span class="co">##   ..- attr(*, ".internal.selfref")=&lt;externalptr&gt; </span></span>
<span><span class="co">##  $ pltcondx   :Classes 'data.table' and 'data.frame':    66 obs. of  29 variables:</span></span>
<span><span class="co">##   ..- attr(*, ".internal.selfref")=&lt;externalptr&gt; </span></span>
<span><span class="co">##   ..- attr(*, "sorted")= chr [1:2] "PLT_CN" "CONDID"</span></span>
<span><span class="co">##  $ cuniqueid  : chr "PLT_CN"</span></span>
<span><span class="co">##  $ condid     : chr "CONDID"</span></span>
<span><span class="co">##  $ ACI.filter : chr "COND_STATUS_CD == 1"</span></span>
<span><span class="co">##  $ unitarea   :Classes 'data.table' and 'data.frame':    1 obs. of  2 variables:</span></span>
<span><span class="co">##   ..- attr(*, ".internal.selfref")=&lt;externalptr&gt; </span></span>
<span><span class="co">##   ..- attr(*, "sorted")= chr "ONEUNIT"</span></span>
<span><span class="co">##  $ areavar    : chr "ACRES_GIS"</span></span>
<span><span class="co">##  $ areaunits  : chr "acres"</span></span>
<span><span class="co">##  $ unitvar    : chr "ONEUNIT"</span></span>
<span><span class="co">##  $ unitvars   : chr "ONEUNIT"</span></span>
<span><span class="co">##  $ unitlut    :Classes 'data.table' and 'data.frame':    1 obs. of  7 variables:</span></span>
<span><span class="co">##   ..- attr(*, ".internal.selfref")=&lt;externalptr&gt; </span></span>
<span><span class="co">##   ..- attr(*, "sorted")= chr "ONEUNIT"</span></span>
<span><span class="co">##  $ plotsampcnt:'data.frame': 2 obs. of  3 variables:</span></span>
<span><span class="co">##  $ condsampcnt:'data.frame': 4 obs. of  3 variables:</span></span>
<span><span class="co">##  $ npixels    :Classes 'data.table' and 'data.frame':    1 obs. of  2 variables:</span></span>
<span><span class="co">##   ..- attr(*, ".internal.selfref")=&lt;externalptr&gt; </span></span>
<span><span class="co">##  $ npixelvar  : chr "npixels"</span></span>
<span><span class="co">##  $ states     : chr "Wyoming"</span></span>
<span><span class="co">##  $ invyrs     :List of 1</span></span>
<span><span class="co">##  $ estvar.area: chr "CONDPROP_ADJ"</span></span>
<span><span class="co">##  $ adj        : chr "plot"</span></span>
<span><span class="co">##  $ treex      :Classes 'data.table' and 'data.frame':    1691 obs. of  21 variables:</span></span>
<span><span class="co">##   ..- attr(*, ".internal.selfref")=&lt;externalptr&gt; </span></span>
<span><span class="co">##   ..- attr(*, "sorted")= chr "PLT_CN"</span></span>
<span><span class="co">##  $ tuniqueid  : chr "PLT_CN"</span></span>
<span><span class="co">##  $ adjtree    : logi FALSE</span></span>
<span><span class="co">##  $ prednames  : chr [1:5] "dem" "slp" "asp_cos" "asp_sin" ...</span></span>
<span><span class="co">##  $ predfac    : chr "fornf"</span></span></code></pre>
</details><p>Now that we’ve created our population dataset, we can move on to
estimation.</p>
</details>
</div>
</div>
<div class="section level3">
<h3 id="modmaarea">
<code>modMAarea</code><a class="anchor" aria-label="anchor" href="#modmaarea"></a>
</h3>
<div class="section level4">
<h4 id="example-2-area-of-forest-land-wyoming-2011-2013">Example 2: Area of forest land, Wyoming, 2011-2013<a class="anchor" aria-label="anchor" href="#example-2-area-of-forest-land-wyoming-2011-2013"></a>
</h4>
<details><summary>
View Example
</summary><p>In this example, we look at estimating the area of forest land in
Wyoming from 2011 to 2013 summed to the population unit
(<code>sumunit = TRUE</code>) with the generalized regression estimator
(<code>MAmethod = "greg"</code>). <code>FIESTA</code> returns raw data
for area of forest land, Wyoming, 2011-2013 (sum estimation units).</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">area1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/modMAarea.html">modMAarea</a></span><span class="op">(</span></span>
<span>  MApopdat <span class="op">=</span> <span class="va">MApopdat</span>, <span class="co"># pop - population calculations for WY, post-stratification</span></span>
<span>  MAmethod <span class="op">=</span> <span class="st">"greg"</span>, <span class="co"># est - model-assisted method</span></span>
<span>  landarea <span class="op">=</span> <span class="st">"FOREST"</span>, <span class="co"># est - forest land filter</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<p>We can look at the structure of this output with <code>str</code> and
the estimates below. Note that again <code>FIESTA</code> outputs a
list.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">area1</span>, max.level <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">## List of 4</span></span>
<span><span class="co">##  $ est    :Classes 'data.table' and 'data.frame':    1 obs. of  3 variables:</span></span>
<span><span class="co">##   ..$ ONEUNIT               : num 1</span></span>
<span><span class="co">##   ..$ Estimate              : num 660395</span></span>
<span><span class="co">##   ..$ Percent Sampling Error: num 9.42</span></span>
<span><span class="co">##   ..- attr(*, ".internal.selfref")=&lt;externalptr&gt; </span></span>
<span><span class="co">##   ..- attr(*, "sorted")= chr "ONEUNIT"</span></span>
<span><span class="co">##  $ raw    :List of 9</span></span>
<span><span class="co">##   ..$ unit_totest  :'data.frame':    1 obs. of  18 variables:</span></span>
<span><span class="co">##   ..$ domdat       :'data.frame':    66 obs. of  19 variables:</span></span>
<span><span class="co">##   ..$ module       : chr "MA"</span></span>
<span><span class="co">##   ..$ esttype      : chr "AREA"</span></span>
<span><span class="co">##   ..$ MAmethod     : chr "greg"</span></span>
<span><span class="co">##   ..$ predselectlst:List of 1</span></span>
<span><span class="co">##   ..$ rowvar       : chr "TOTAL"</span></span>
<span><span class="co">##   ..$ colvar       : chr "NONE"</span></span>
<span><span class="co">##   ..$ areaunits    : chr "acres"</span></span>
<span><span class="co">##  $ statecd: int 56</span></span>
<span><span class="co">##  $ invyr  : int [1:3] 2011 2012 2013</span></span></code></pre>
</details><div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">area1</span><span class="op">$</span><span class="va">est</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">##    ONEUNIT Estimate Percent Sampling Error</span></span>
<span><span class="co">## 1:       1 660395.1                   9.42</span></span></code></pre>
</details></details>
</div>
<div class="section level4">
<h4 id="example-3-area-of-forest-land-wyoming-2011-2013-using-the-elastic-net-for-variable-selection">Example 3: Area of forest land, Wyoming, 2011-2013, using the
Elastic Net for variable selection<a class="anchor" aria-label="anchor" href="#example-3-area-of-forest-land-wyoming-2011-2013-using-the-elastic-net-for-variable-selection"></a>
</h4>
<details><summary>
View Example
</summary><p>Here, we fit the same model as the above example, but rather than
using <code>"greg"</code> are our model-assisted method, we can use
<code>"gregEN"</code> where the EN stands for “elastic net”. The elastic
net performs variable selection for us, grabbing predictors it finds to
be most useful in the model.</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">area2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/modMAarea.html">modMAarea</a></span><span class="op">(</span></span>
<span>  MApopdat <span class="op">=</span> <span class="va">MApopdat</span>, <span class="co"># pop - population calculations for WY, post-stratification</span></span>
<span>  MAmethod <span class="op">=</span> <span class="st">"gregEN"</span>, <span class="co"># est - model-assisted method</span></span>
<span>  landarea <span class="op">=</span> <span class="st">"FOREST"</span>, <span class="co"># est - forest land filter</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<p>We can again see that the structure of the list is very similar to
that in the above example:</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">area2</span>, max.level <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">## List of 4</span></span>
<span><span class="co">##  $ est    :Classes 'data.table' and 'data.frame':    1 obs. of  3 variables:</span></span>
<span><span class="co">##   ..$ ONEUNIT               : num 1</span></span>
<span><span class="co">##   ..$ Estimate              : num 666672</span></span>
<span><span class="co">##   ..$ Percent Sampling Error: num 10.2</span></span>
<span><span class="co">##   ..- attr(*, ".internal.selfref")=&lt;externalptr&gt; </span></span>
<span><span class="co">##   ..- attr(*, "sorted")= chr "ONEUNIT"</span></span>
<span><span class="co">##  $ raw    :List of 9</span></span>
<span><span class="co">##   ..$ unit_totest  :'data.frame':    1 obs. of  18 variables:</span></span>
<span><span class="co">##   ..$ domdat       :'data.frame':    66 obs. of  19 variables:</span></span>
<span><span class="co">##   ..$ module       : chr "MA"</span></span>
<span><span class="co">##   ..$ esttype      : chr "AREA"</span></span>
<span><span class="co">##   ..$ MAmethod     : chr "gregEN"</span></span>
<span><span class="co">##   ..$ predselectlst:List of 1</span></span>
<span><span class="co">##   ..$ rowvar       : chr "TOTAL"</span></span>
<span><span class="co">##   ..$ colvar       : chr "NONE"</span></span>
<span><span class="co">##   ..$ areaunits    : chr "acres"</span></span>
<span><span class="co">##  $ statecd: int 56</span></span>
<span><span class="co">##  $ invyr  : int [1:3] 2011 2012 2013</span></span></code></pre>
</details><p>However now the <code>raw</code> list has an item call
<code>predselectlst</code>. We can look at this item now:</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">area2</span><span class="op">$</span><span class="va">raw</span><span class="op">$</span><span class="va">predselectlst</span><span class="op">$</span><span class="va">totest</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">##    ONEUNIT TOTAL           dem slp asp_cos asp_sin fornf2</span></span>
<span><span class="co">## 1:       1     1 -0.0002583806   0       0       0      0</span></span></code></pre>
</details><p>Notably, we can see that <code>dem</code>, <code>slp</code>,
<code>asp_cos</code>, and <code>asp_sin</code> were removed from the
model.</p>
</details>
</div>
<div class="section level4">
<h4 id="example-4-area-by-forest-type-on-forest-land-wyoming-2011-2013">Example 4: Area by forest type on forest land, Wyoming,
2011-2013<a class="anchor" aria-label="anchor" href="#example-4-area-by-forest-type-on-forest-land-wyoming-2011-2013"></a>
</h4>
<details><summary>
View Example
</summary><p>In this example, we look at adding rows to the output and include
returntitle=TRUE to return title information.</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">area3</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/modMAarea.html">modMAarea</a></span><span class="op">(</span></span>
<span>    MApopdat <span class="op">=</span> <span class="va">MApopdat</span>,         <span class="co"># pop - population calculations for WY, post-stratification</span></span>
<span>    MAmethod <span class="op">=</span> <span class="st">"greg"</span>,           <span class="co"># est - model-assisted method</span></span>
<span>    landarea <span class="op">=</span> <span class="st">"FOREST"</span>,         <span class="co"># est - forest land filter</span></span>
<span>    rowvar <span class="op">=</span> <span class="st">"FORTYPCD"</span>,         <span class="co"># est - row domain</span></span>
<span>    returntitle <span class="op">=</span> <span class="cn">TRUE</span>           <span class="co"># out - return title information</span></span>
<span>    <span class="op">)</span></span></code></pre></div>
<p>Again, we can look at the contents of the output list. The output now
includes titlelst, a list of associated titles.</p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">area3</span>, max.level <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">## List of 5</span></span>
<span><span class="co">##  $ est     :'data.frame':    8 obs. of  3 variables:</span></span>
<span><span class="co">##  $ titlelst:List of 9</span></span>
<span><span class="co">##  $ raw     :List of 10</span></span>
<span><span class="co">##  $ statecd : int 56</span></span>
<span><span class="co">##  $ invyr   : int [1:3] 2011 2012 2013</span></span></code></pre>
</details><p>And the estimates:</p>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## Estimate and percent sampling error of estimate</span></span>
<span><span class="va">area3</span><span class="op">$</span><span class="va">est</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">##   Forest type Estimate Percent Sampling Error</span></span>
<span><span class="co">## 1         201  42653.6                  60.56</span></span>
<span><span class="co">## 2         265  47917.2                  67.78</span></span>
<span><span class="co">## 3         266  71039.9                  43.05</span></span>
<span><span class="co">## 4         268  39520.3                   68.8</span></span>
<span><span class="co">## 5         281 407596.6                  16.05</span></span>
<span><span class="co">## 6         901  24905.9                  78.03</span></span>
<span><span class="co">## 7         999  26761.6                  63.54</span></span>
<span><span class="co">## 8       Total 660395.1                   9.42</span></span></code></pre>
</details><p>Along with raw data and titles:</p>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## Raw data (list object) for estimate</span></span>
<span><span class="va">raw3</span> <span class="op">&lt;-</span> <span class="va">area3</span><span class="op">$</span><span class="va">raw</span>      <span class="co"># extract raw data list object from output</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">raw3</span><span class="op">)</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">##  [1] "unit_totest"   "unit_rowest"   "domdat"        "module"       </span></span>
<span><span class="co">##  [5] "esttype"       "MAmethod"      "predselectlst" "rowvar"       </span></span>
<span><span class="co">##  [9] "colvar"        "areaunits"</span></span></code></pre>
</details><div class="sourceCode" id="cb28"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">raw3</span><span class="op">$</span><span class="va">unit_totest</span><span class="op">)</span> <span class="co"># estimates by estimation unit (i.e., ESTN_UNIT)</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">##   ONEUNIT      nhat    nhat.var NBRPLT NBRPLT.gt0 ACRES_GIS AREAUSED      est</span></span>
<span><span class="co">## 1       1 0.5936603 0.003129767     56         37   1112412  1112412 660395.1</span></span>
<span><span class="co">##      est.var   est.se     est.cv      pse CI99left CI99right CI95left CI95right</span></span>
<span><span class="co">## 1 3872964796 62233.15 0.09423624 9.423624 500093.1    820697 538420.4  782369.8</span></span>
<span><span class="co">##   CI68left CI68right</span></span>
<span><span class="co">## 1 598506.8  722283.3</span></span></code></pre>
</details><div class="sourceCode" id="cb30"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">raw3</span><span class="op">$</span><span class="va">totest</span>            <span class="co"># estimates for population (i.e., WY)</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">## NULL</span></span></code></pre>
</details><div class="sourceCode" id="cb32"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">raw3</span><span class="op">$</span><span class="va">unit_rowest</span><span class="op">)</span> <span class="co"># estimates by row, by estimation unit (i.e., ESTN_UNIT)</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">##   ONEUNIT Forest type       nhat     nhat.var NBRPLT NBRPLT.gt0 ACRES_GIS</span></span>
<span><span class="co">## 1       1         201 0.03834336 0.0005392280     56          2   1112412</span></span>
<span><span class="co">## 2       1         265 0.04307505 0.0008523855     56          4   1112412</span></span>
<span><span class="co">## 3       1         266 0.06386110 0.0007557639     56          5   1112412</span></span>
<span><span class="co">## 4       1         268 0.03552668 0.0005973938     56          3   1112412</span></span>
<span><span class="co">## 5       1         281 0.36640782 0.0034566717     56         23   1112412</span></span>
<span><span class="co">## 6       1         901 0.02238906 0.0003052203     56          1   1112412</span></span>
<span><span class="co">##   AREAUSED       est    est.var   est.se    est.cv      pse CI99left CI99right</span></span>
<span><span class="co">## 1  1112412  42653.63  667273775 25831.64 0.6056142 60.56142      0.0 109191.53</span></span>
<span><span class="co">## 2  1112412  47917.21 1054793996 32477.59 0.6777855 67.77855      0.0 131573.95</span></span>
<span><span class="co">## 3  1112412  71039.88  935228490 30581.51 0.4304836 43.04836      0.0 149812.62</span></span>
<span><span class="co">## 4  1112412  39520.32  739251639 27189.18 0.6879799 68.79799      0.0 109555.01</span></span>
<span><span class="co">## 5  1112412 407596.59 4277497216 65402.58 0.1604591 16.04591 239130.7 576062.46</span></span>
<span><span class="co">## 6  1112412  24905.87  377698351 19434.46 0.7803167 78.03167      0.0  74965.72</span></span>
<span><span class="co">##    CI95left CI95right   CI68left CI68right</span></span>
<span><span class="co">## 1      0.00  93282.72  16965.145  68342.11</span></span>
<span><span class="co">## 2      0.00 111572.13  15619.617  80214.81</span></span>
<span><span class="co">## 3  11101.23 130978.53  40627.860 101451.90</span></span>
<span><span class="co">## 4      0.00  92810.14  12481.820  66558.81</span></span>
<span><span class="co">## 5 279409.89 535783.28 342556.478 472636.70</span></span>
<span><span class="co">## 6      0.00  62996.71   5579.111  44232.62</span></span></code></pre>
</details><div class="sourceCode" id="cb34"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">raw3</span><span class="op">$</span><span class="va">rowest</span><span class="op">)</span>      <span class="co"># estimates by row for population (i.e., WY)</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">## NULL</span></span></code></pre>
</details><div class="sourceCode" id="cb36"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## Titles (list object) for estimate</span></span>
<span><span class="va">titlelst3</span> <span class="op">&lt;-</span> <span class="va">area3</span><span class="op">$</span><span class="va">titlelst</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">titlelst3</span><span class="op">)</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">## [1] "title.estpse"  "title.unitvar" "title.ref"     "outfn.estpse" </span></span>
<span><span class="co">## [5] "outfn.rawdat"  "outfn.param"   "title.rowvar"  "title.row"    </span></span>
<span><span class="co">## [9] "title.unitsn"</span></span></code></pre>
</details><div class="sourceCode" id="cb38"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">titlelst3</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">## $title.estpse</span></span>
<span><span class="co">## [1] "Area, in acres, and percent sampling error on forest land by forest type"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $title.unitvar</span></span>
<span><span class="co">## [1] "ONEUNIT"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $title.ref</span></span>
<span><span class="co">## [1] ", 2011-2013"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $outfn.estpse</span></span>
<span><span class="co">## [1] "area_FORTYPCD_forestland"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $outfn.rawdat</span></span>
<span><span class="co">## [1] "area_FORTYPCD_forestland_rawdata"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $outfn.param</span></span>
<span><span class="co">## [1] "area_FORTYPCD_forestland_parameters"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $title.rowvar</span></span>
<span><span class="co">## [1] "Forest type"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $title.row</span></span>
<span><span class="co">## [1] "Area, in acres, on forest land by forest type; , 2011-2013"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $title.unitsn</span></span>
<span><span class="co">## [1] "acres"</span></span></code></pre>
</details></details>
</div>
<div class="section level4">
<h4 id="example-5-area-by-forest-type-and-stand-size-class-on-forest-land-wyoming-2011-2013">Example 5: Area by forest type and stand-size class on forest land,
Wyoming, 2011-2013<a class="anchor" aria-label="anchor" href="#example-5-area-by-forest-type-and-stand-size-class-on-forest-land-wyoming-2011-2013"></a>
</h4>
<details><summary>
View Example
</summary><p>In this example, we look at adding rows and columns to output,
including FIA names. We also output estimates and percent standard error
in the same cell with the <code>allin1</code> argument in
<code>table_options</code> and save data to an outfolder with the
<code>outfolder</code> argument in <code>savedata_options</code>.</p>
<div class="sourceCode" id="cb40"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## Area of forest land by forest type and stand-size class, Wyoming, 2011-2013</span></span>
<span><span class="va">area4</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/modMAarea.html">modMAarea</a></span><span class="op">(</span></span>
<span>    MApopdat <span class="op">=</span> <span class="va">MApopdat</span>,         <span class="co"># pop - population calculations for WY, post-stratification</span></span>
<span>    MAmethod <span class="op">=</span> <span class="st">"greg"</span>,           <span class="co"># est - model-assisted method</span></span>
<span>    landarea <span class="op">=</span> <span class="st">"FOREST"</span>,         <span class="co"># est - forest land filter</span></span>
<span>    rowvar <span class="op">=</span> <span class="st">"FORTYPCD"</span>,         <span class="co"># est - row domain</span></span>
<span>    colvar <span class="op">=</span> <span class="st">"STDSZCD"</span>,          <span class="co"># est - column domain</span></span>
<span>    savedata <span class="op">=</span> <span class="cn">TRUE</span>,             <span class="co"># out - save data to outfolder</span></span>
<span>    returntitle <span class="op">=</span> <span class="cn">TRUE</span>,          <span class="co"># out - return title information</span></span>
<span>    table_opts <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>      row.FIAname <span class="op">=</span> <span class="cn">TRUE</span>,          <span class="co"># table - row domain names</span></span>
<span>      col.FIAname <span class="op">=</span> <span class="cn">TRUE</span>,          <span class="co"># table - column domain names</span></span>
<span>      allin1 <span class="op">=</span> <span class="cn">TRUE</span>                <span class="co"># table - return output with est(pse)</span></span>
<span>      <span class="op">)</span>,</span>
<span>    savedata_opts <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>      outfolder <span class="op">=</span> <span class="va">outfolder</span>,       <span class="co"># save - outfolder for saving data</span></span>
<span>      outfn.pre <span class="op">=</span> <span class="st">"WY"</span>             <span class="co"># save - prefix for output files</span></span>
<span>      <span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span></span>
<span><span class="va">area4</span><span class="op">$</span><span class="va">est</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">##                         Forest type     Large diameter    Medium diameter</span></span>
<span><span class="co">## 1:                      Douglas-fir  23,330.7 ( 79.00)        -- (    --)</span></span>
<span><span class="co">## 2:                 Engelmann spruce  36,892.1 ( 74.16)  11,025.2 (175.15)</span></span>
<span><span class="co">## 3: Engelmann spruce / subalpine fir  40,287.9 ( 68.99)  14,443.2 ( 66.30)</span></span>
<span><span class="co">## 4:                    Subalpine fir  26,255.3 ( 75.29)        -- (    --)</span></span>
<span><span class="co">## 5:                   Lodgepole pine 140,798.2 ( 33.20) 230,288.3 ( 20.42)</span></span>
<span><span class="co">## 6:                            Aspen        -- (    --)        -- (    --)</span></span>
<span><span class="co">## 7:                       Nonstocked        -- (    --)        -- (    --)</span></span>
<span><span class="co">## 8:                            Total 267,564.1 ( 21.17) 255,756.7 ( 19.38)</span></span>
<span><span class="co">##        Small diameter        Nonstocked              Total</span></span>
<span><span class="co">## 1:  19,322.9 ( 99.12)       -- (    --)  42,653.6 ( 60.56)</span></span>
<span><span class="co">## 2:        -- (    --)       -- (    --)  47,917.2 ( 67.78)</span></span>
<span><span class="co">## 3:  16,308.7 ( 71.46)       -- (    --)  71,039.9 ( 43.05)</span></span>
<span><span class="co">## 4:  13,265.0 (141.72)       -- (    --)  39,520.3 ( 68.80)</span></span>
<span><span class="co">## 5:  36,510.1 ( 74.46)       -- (    --) 407,596.6 ( 16.05)</span></span>
<span><span class="co">## 6:  24,905.9 ( 78.03)       -- (    --)  24,905.9 ( 78.03)</span></span>
<span><span class="co">## 7:        -- (    --) 26,761.6 ( 63.54)  26,761.6 ( 63.54)</span></span>
<span><span class="co">## 8: 110,312.6 ( 37.41) 26,761.6 ( 63.54) 660,395.1 (  9.42)</span></span></code></pre>
</details><p>We can again look at the output list, estimates, raw data, and
titles:</p>
<div class="sourceCode" id="cb42"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## Look at output list</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">area4</span><span class="op">)</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">## [1] "est"      "pse"      "titlelst" "raw"      "statecd"  "invyr"</span></span></code></pre>
</details><div class="sourceCode" id="cb44"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## Estimate and percent sampling error of estimate</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">area4</span><span class="op">$</span><span class="va">est</span><span class="op">)</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">##                         Forest type     Large diameter    Medium diameter</span></span>
<span><span class="co">## 1:                      Douglas-fir  23,330.7 ( 79.00)        -- (    --)</span></span>
<span><span class="co">## 2:                 Engelmann spruce  36,892.1 ( 74.16)  11,025.2 (175.15)</span></span>
<span><span class="co">## 3: Engelmann spruce / subalpine fir  40,287.9 ( 68.99)  14,443.2 ( 66.30)</span></span>
<span><span class="co">## 4:                    Subalpine fir  26,255.3 ( 75.29)        -- (    --)</span></span>
<span><span class="co">## 5:                   Lodgepole pine 140,798.2 ( 33.20) 230,288.3 ( 20.42)</span></span>
<span><span class="co">## 6:                            Aspen        -- (    --)        -- (    --)</span></span>
<span><span class="co">##       Small diameter  Nonstocked              Total</span></span>
<span><span class="co">## 1: 19,322.9 ( 99.12) -- (    --)  42,653.6 ( 60.56)</span></span>
<span><span class="co">## 2:       -- (    --) -- (    --)  47,917.2 ( 67.78)</span></span>
<span><span class="co">## 3: 16,308.7 ( 71.46) -- (    --)  71,039.9 ( 43.05)</span></span>
<span><span class="co">## 4: 13,265.0 (141.72) -- (    --)  39,520.3 ( 68.80)</span></span>
<span><span class="co">## 5: 36,510.1 ( 74.46) -- (    --) 407,596.6 ( 16.05)</span></span>
<span><span class="co">## 6: 24,905.9 ( 78.03) -- (    --)  24,905.9 ( 78.03)</span></span></code></pre>
</details><div class="sourceCode" id="cb46"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## Raw data (list object) for estimate</span></span>
<span><span class="va">raw4</span> <span class="op">&lt;-</span> <span class="va">area4</span><span class="op">$</span><span class="va">raw</span>      <span class="co"># extract raw data list object from output</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">raw4</span><span class="op">)</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">##  [1] "unit_totest"   "unit_rowest"   "unit_colest"   "unit_grpest"  </span></span>
<span><span class="co">##  [5] "domdat"        "module"        "esttype"       "MAmethod"     </span></span>
<span><span class="co">##  [9] "predselectlst" "rowvar"        "colvar"        "areaunits"</span></span></code></pre>
</details><div class="sourceCode" id="cb48"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">raw4</span><span class="op">$</span><span class="va">unit_totest</span><span class="op">)</span> <span class="co"># estimates by estimation unit (i.e., ESTN_UNIT)</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">##   ONEUNIT      nhat    nhat.var NBRPLT NBRPLT.gt0 ACRES_GIS AREAUSED      est</span></span>
<span><span class="co">## 1       1 0.5936603 0.003129767     56         37   1112412  1112412 660395.1</span></span>
<span><span class="co">##      est.var   est.se     est.cv      pse CI99left CI99right CI95left CI95right</span></span>
<span><span class="co">## 1 3872964796 62233.15 0.09423624 9.423624 500093.1    820697 538420.4  782369.8</span></span>
<span><span class="co">##   CI68left CI68right</span></span>
<span><span class="co">## 1 598506.8  722283.3</span></span></code></pre>
</details><div class="sourceCode" id="cb50"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">raw4</span><span class="op">$</span><span class="va">totest</span><span class="op">)</span>      <span class="co"># estimates for population (i.e., WY)</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">## NULL</span></span></code></pre>
</details><div class="sourceCode" id="cb52"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">raw4</span><span class="op">$</span><span class="va">unit_rowest</span><span class="op">)</span> <span class="co"># estimates by row, by estimation unit (i.e., ESTN_UNIT)</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">##   ONEUNIT                      Forest type       nhat     nhat.var NBRPLT</span></span>
<span><span class="co">## 1       1                      Douglas-fir 0.03834336 0.0005392280     56</span></span>
<span><span class="co">## 2       1                 Engelmann spruce 0.04307505 0.0008523855     56</span></span>
<span><span class="co">## 3       1 Engelmann spruce / subalpine fir 0.06386110 0.0007557639     56</span></span>
<span><span class="co">## 4       1                    Subalpine fir 0.03552668 0.0005973938     56</span></span>
<span><span class="co">## 5       1                   Lodgepole pine 0.36640782 0.0034566717     56</span></span>
<span><span class="co">## 6       1                            Aspen 0.02238906 0.0003052203     56</span></span>
<span><span class="co">##   NBRPLT.gt0 FORTYPCD ACRES_GIS AREAUSED       est    est.var   est.se</span></span>
<span><span class="co">## 1          2      201   1112412  1112412  42653.63  667273775 25831.64</span></span>
<span><span class="co">## 2          4      265   1112412  1112412  47917.21 1054793996 32477.59</span></span>
<span><span class="co">## 3          5      266   1112412  1112412  71039.88  935228490 30581.51</span></span>
<span><span class="co">## 4          3      268   1112412  1112412  39520.32  739251639 27189.18</span></span>
<span><span class="co">## 5         23      281   1112412  1112412 407596.59 4277497216 65402.58</span></span>
<span><span class="co">## 6          1      901   1112412  1112412  24905.87  377698351 19434.46</span></span>
<span><span class="co">##      est.cv      pse CI99left CI99right  CI95left CI95right   CI68left</span></span>
<span><span class="co">## 1 0.6056142 60.56142      0.0 109191.53      0.00  93282.72  16965.145</span></span>
<span><span class="co">## 2 0.6777855 67.77855      0.0 131573.95      0.00 111572.13  15619.617</span></span>
<span><span class="co">## 3 0.4304836 43.04836      0.0 149812.62  11101.23 130978.53  40627.860</span></span>
<span><span class="co">## 4 0.6879799 68.79799      0.0 109555.01      0.00  92810.14  12481.820</span></span>
<span><span class="co">## 5 0.1604591 16.04591 239130.7 576062.46 279409.89 535783.28 342556.478</span></span>
<span><span class="co">## 6 0.7803167 78.03167      0.0  74965.72      0.00  62996.71   5579.111</span></span>
<span><span class="co">##   CI68right</span></span>
<span><span class="co">## 1  68342.11</span></span>
<span><span class="co">## 2  80214.81</span></span>
<span><span class="co">## 3 101451.90</span></span>
<span><span class="co">## 4  66558.81</span></span>
<span><span class="co">## 5 472636.70</span></span>
<span><span class="co">## 6  44232.62</span></span></code></pre>
</details><div class="sourceCode" id="cb54"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">raw4</span><span class="op">$</span><span class="va">rowest</span><span class="op">)</span>      <span class="co"># estimates by row for population (i.e., WY)</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">## NULL</span></span></code></pre>
</details><div class="sourceCode" id="cb56"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">raw4</span><span class="op">$</span><span class="va">unit_colest</span><span class="op">)</span> <span class="co"># estimates by column, by estimation unit (i.e., ESTN_UNIT)</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">##   ONEUNIT Stand-size class       nhat     nhat.var NBRPLT NBRPLT.gt0 STDSZCD</span></span>
<span><span class="co">## 1       1   Large diameter 0.24052605 0.0025935705     56         18       1</span></span>
<span><span class="co">## 2       1  Medium diameter 0.22991178 0.0019845421     56         14       2</span></span>
<span><span class="co">## 3       1   Small diameter 0.09916524 0.0013761149     56          6       3</span></span>
<span><span class="co">## 4       1       Nonstocked 0.02405726 0.0002336838     56          1       5</span></span>
<span><span class="co">##   ACRES_GIS AREAUSED       est    est.var   est.se    est.cv      pse  CI99left</span></span>
<span><span class="co">## 1   1112412  1112412 267564.15 3209443017 56651.95 0.2117322 21.17322 121638.40</span></span>
<span><span class="co">## 2   1112412  1112412 255756.70 2455793975 49555.97 0.1937621 19.37621 128108.99</span></span>
<span><span class="co">## 3   1112412  1112412 110312.64 1702888801 41266.07 0.3740829 37.40829   4018.28</span></span>
<span><span class="co">## 4   1112412  1112412  26761.59  289174599 17005.13 0.6354306 63.54306      0.00</span></span>
<span><span class="co">##   CI99right  CI95left CI95right   CI68left CI68right</span></span>
<span><span class="co">## 1 413489.89 156528.37 378599.92 211226.172 323902.12</span></span>
<span><span class="co">## 2 383404.42 158628.79 352884.62 206475.381 305038.03</span></span>
<span><span class="co">## 3 216607.00  29432.62 191192.66  69275.269 151350.01</span></span>
<span><span class="co">## 4  70563.91      0.00  60091.04   9850.701  43672.48</span></span></code></pre>
</details><div class="sourceCode" id="cb58"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">raw4</span><span class="op">$</span><span class="va">colest</span><span class="op">)</span>      <span class="co"># estimates by column for population (i.e., WY)</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">## NULL</span></span></code></pre>
</details><div class="sourceCode" id="cb60"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">raw4</span><span class="op">$</span><span class="va">unit_grpest</span><span class="op">)</span> <span class="co"># estimates by row and column, by estimation unit (i.e., ESTN_UNIT)</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">##   ONEUNIT                                           grpvar        nhat</span></span>
<span><span class="co">## 1       1                       Douglas-fir#Large diameter 0.020973074</span></span>
<span><span class="co">## 2       1                       Douglas-fir#Small diameter 0.017370285</span></span>
<span><span class="co">## 3       1                  Engelmann spruce#Large diameter 0.033164010</span></span>
<span><span class="co">## 4       1                 Engelmann spruce#Medium diameter 0.009911038</span></span>
<span><span class="co">## 5       1  Engelmann spruce / subalpine fir#Large diameter 0.036216716</span></span>
<span><span class="co">## 6       1 Engelmann spruce / subalpine fir#Medium diameter 0.012983698</span></span>
<span><span class="co">##       nhat.var NBRPLT NBRPLT.gt0                      Forest type</span></span>
<span><span class="co">## 1 2.745298e-04     56          1                      Douglas-fir</span></span>
<span><span class="co">## 2 2.964436e-04     56          1                      Douglas-fir</span></span>
<span><span class="co">## 3 6.048455e-04     56          3                 Engelmann spruce</span></span>
<span><span class="co">## 4 3.013453e-04     56          1                 Engelmann spruce</span></span>
<span><span class="co">## 5 6.243626e-04     56          3 Engelmann spruce / subalpine fir</span></span>
<span><span class="co">## 6 7.410764e-05     56          1 Engelmann spruce / subalpine fir</span></span>
<span><span class="co">##   Stand-size class STDSZCD FORTYPCD ACRES_GIS AREAUSED      est   est.var</span></span>
<span><span class="co">## 1   Large diameter       1      201   1112412  1112412 23330.71 339719955</span></span>
<span><span class="co">## 2   Small diameter       3      201   1112412  1112412 19322.92 366837446</span></span>
<span><span class="co">## 3   Large diameter       1      265   1112412  1112412 36892.05 748472910</span></span>
<span><span class="co">## 4  Medium diameter       2      265   1112412  1112412 11025.16 372903083</span></span>
<span><span class="co">## 5   Large diameter       1      266   1112412  1112412 40287.92 772624533</span></span>
<span><span class="co">## 6  Medium diameter       2      266   1112412  1112412 14443.23  91705337</span></span>
<span><span class="co">##     est.se    est.cv       pse CI99left CI99right CI95left CI95right   CI68left</span></span>
<span><span class="co">## 1 18431.49 0.7900101  79.00101        0  70807.09        0  59455.77  5001.3621</span></span>
<span><span class="co">## 2 19153.00 0.9912064  99.12064        0  68657.78        0  56862.11   276.0668</span></span>
<span><span class="co">## 3 27358.23 0.7415752  74.15752        0 107362.19        0  90513.21  9685.4439</span></span>
<span><span class="co">## 4 19310.70 1.7515118 175.15118        0  60766.22        0  48873.43     0.0000</span></span>
<span><span class="co">## 5 27796.12 0.6899369  68.99369        0 111885.99        0  94767.33 12645.8475</span></span>
<span><span class="co">## 6  9576.29 0.6630299  66.30299        0  39110.12        0  33212.41  4920.0086</span></span>
<span><span class="co">##   CI68right</span></span>
<span><span class="co">## 1  41660.05</span></span>
<span><span class="co">## 2  38369.77</span></span>
<span><span class="co">## 3  64098.66</span></span>
<span><span class="co">## 4  30228.84</span></span>
<span><span class="co">## 5  67930.00</span></span>
<span><span class="co">## 6  23966.44</span></span></code></pre>
</details><div class="sourceCode" id="cb62"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">raw4</span><span class="op">$</span><span class="va">grpest</span><span class="op">)</span>      <span class="co"># estimates by row and column for population (i.e., WY)</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">## NULL</span></span></code></pre>
</details><div class="sourceCode" id="cb64"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## Titles (list object) for estimate</span></span>
<span><span class="va">titlelst4</span> <span class="op">&lt;-</span> <span class="va">area4</span><span class="op">$</span><span class="va">titlelst</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">titlelst4</span><span class="op">)</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">##  [1] "title.estpse"  "title.unitvar" "title.ref"     "outfn.estpse" </span></span>
<span><span class="co">##  [5] "outfn.rawdat"  "outfn.param"   "title.rowvar"  "title.row"    </span></span>
<span><span class="co">##  [9] "title.colvar"  "title.col"     "title.unitsn"</span></span></code></pre>
</details><div class="sourceCode" id="cb66"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">titlelst4</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">## $title.estpse</span></span>
<span><span class="co">## [1] "Area, in acres (percent sampling error), by forest type and stand-size class on forest land"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $title.unitvar</span></span>
<span><span class="co">## [1] "ONEUNIT"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $title.ref</span></span>
<span><span class="co">## [1] ", 2011-2013"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $outfn.estpse</span></span>
<span><span class="co">## [1] "WY_area_FORTYPNM_STDSZNM_forestland"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $outfn.rawdat</span></span>
<span><span class="co">## [1] "WY_area_FORTYPNM_STDSZNM_forestland_rawdata"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $outfn.param</span></span>
<span><span class="co">## [1] "WY_area_FORTYPNM_STDSZNM_forestland_parameters"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $title.rowvar</span></span>
<span><span class="co">## [1] "Forest type"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $title.row</span></span>
<span><span class="co">## [1] "Area, in acres (percent sampling error), by forest type on forest land; , 2011-2013"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $title.colvar</span></span>
<span><span class="co">## [1] "Stand-size class"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $title.col</span></span>
<span><span class="co">## [1] "Area, in acres (percent sampling error), by stand-size class on forest land; , 2011-2013"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $title.unitsn</span></span>
<span><span class="co">## [1] "acres"</span></span></code></pre>
</details><div class="sourceCode" id="cb68"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## List output files in outfolder</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/list.files.html" class="external-link">list.files</a></span><span class="op">(</span><span class="va">outfolder</span>, pattern <span class="op">=</span> <span class="st">"WY_area"</span><span class="op">)</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">## [1] "WY_area_FORTYPNM_STDSZNM_forestland_modMA_mase_greg.csv"</span></span></code></pre>
</details><div class="sourceCode" id="cb70"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/list.files.html" class="external-link">list.files</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">outfolder</span>, <span class="st">"/rawdata"</span><span class="op">)</span>, pattern <span class="op">=</span> <span class="st">"WY_area"</span><span class="op">)</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">## [1] "WY_area_FORTYPNM_STDSZNM_forestland_rawdata_modMA_mase_greg_domdat.csv"     </span></span>
<span><span class="co">## [2] "WY_area_FORTYPNM_STDSZNM_forestland_rawdata_modMA_mase_greg_unit_colest.csv"</span></span>
<span><span class="co">## [3] "WY_area_FORTYPNM_STDSZNM_forestland_rawdata_modMA_mase_greg_unit_grpest.csv"</span></span>
<span><span class="co">## [4] "WY_area_FORTYPNM_STDSZNM_forestland_rawdata_modMA_mase_greg_unit_rowest.csv"</span></span>
<span><span class="co">## [5] "WY_area_FORTYPNM_STDSZNM_forestland_rawdata_modMA_mase_greg_unit_totest.csv"</span></span></code></pre>
</details></details>
</div>
</div>
<div class="section level3">
<h3 id="modmatree">
<code>modMAtree</code><a class="anchor" aria-label="anchor" href="#modmatree"></a>
</h3>
<p>We will set our estimate variable and filter now. We set
<code>estvar</code> to <code>"VOLCFNET"</code> for net cubic foot
volume, and filter with <code>estvar.filter</code> set to
<code>"STATUSCD == 1"</code> so we only consider live trees in our
estimation.</p>
<div class="sourceCode" id="cb72"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">estvar</span> <span class="op">&lt;-</span> <span class="st">"VOLCFNET"</span></span>
<span><span class="va">live_trees</span> <span class="op">&lt;-</span> <span class="st">"STATUSCD == 1"</span></span></code></pre></div>
<div class="section level4">
<h4 id="example-6-net-cubic-foot-volume-of-live-trees-wyoming-2011-2013">Example 6: Net cubic-foot volume of live trees, Wyoming,
2011-2013<a class="anchor" aria-label="anchor" href="#example-6-net-cubic-foot-volume-of-live-trees-wyoming-2011-2013"></a>
</h4>
<details><summary>
View Example
</summary><p>We now will generate estimates by estimation unit (i.e., ESTN_UNIT)
and sum to population (i.e., WY) with <code>modMAtree</code>.</p>
<div class="sourceCode" id="cb73"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## Return raw data and titles</span></span>
<span><span class="co">## Total net cubic-foot volume of live trees (at least 5 inches diameter), Wyoming, 2011-2013 </span></span>
<span><span class="va">tree1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/modMAtree.html">modMAtree</a></span><span class="op">(</span></span>
<span>    MApopdat <span class="op">=</span> <span class="va">MApopdat</span>,         <span class="co"># pop - population calculations</span></span>
<span>    MAmethod <span class="op">=</span> <span class="st">"greg"</span>,           <span class="co"># est - model-assisted method</span></span>
<span>    landarea <span class="op">=</span> <span class="st">"FOREST"</span>,         <span class="co"># est - forest land filter</span></span>
<span>    estvar <span class="op">=</span> <span class="va">estvar</span>,             <span class="co"># est - net cubic-foot volume</span></span>
<span>    estvar.filter <span class="op">=</span> <span class="va">live_trees</span>,  <span class="co"># est - live trees only</span></span>
<span>    returntitle <span class="op">=</span> <span class="cn">TRUE</span>           <span class="co"># out - return title information</span></span>
<span>    <span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">tree1</span><span class="op">)</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">## [1] "est"      "titlelst" "raw"      "statecd"  "invyr"</span></span></code></pre>
</details><div class="sourceCode" id="cb75"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tree1</span><span class="op">$</span><span class="va">raw</span><span class="op">$</span><span class="va">unit_totest</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">##   ONEUNIT     nhat nhat.var NBRPLT NBRPLT.gt0 ACRES_GIS AREAUSED        est</span></span>
<span><span class="co">## 1       1 1165.825  30923.7     56         34   1112412  1112412 1296877648</span></span>
<span><span class="co">##        est.var    est.se    est.cv      pse  CI99left  CI99right  CI95left</span></span>
<span><span class="co">## 1 3.826688e+16 195619213 0.1508386 15.08386 792995947 1800759350 913471036</span></span>
<span><span class="co">##    CI95right   CI68left  CI68right</span></span>
<span><span class="co">## 1 1680284261 1102342580 1491412717</span></span></code></pre>
</details></details>
</div>
<div class="section level4">
<h4 id="example-7-net-cubic-foot-volume-of-live-trees-wyoming-2011-2013-using-the-elastic-net-for-variable-selection">Example 7: Net cubic-foot volume of live trees, Wyoming, 2011-2013,
using the Elastic Net for variable selection<a class="anchor" aria-label="anchor" href="#example-7-net-cubic-foot-volume-of-live-trees-wyoming-2011-2013-using-the-elastic-net-for-variable-selection"></a>
</h4>
<details><summary>
View Example
</summary><p>Here, we fit the same model as the above example, but rather than
using <code>"greg"</code> are our model-assisted method, we can use
<code>"gregEN"</code> where the EN stands for “elastic net”. The elastic
net performs variable selection for us, grabbing predictors it finds to
be most useful in the model.</p>
<div class="sourceCode" id="cb77"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## Return raw data and titles</span></span>
<span><span class="co">## Total net cubic-foot volume of live trees (at least 5 inches diameter), Wyoming, 2011-2013 </span></span>
<span><span class="va">tree2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/modMAtree.html">modMAtree</a></span><span class="op">(</span></span>
<span>    MApopdat <span class="op">=</span> <span class="va">MApopdat</span>,         <span class="co"># pop - population calculations</span></span>
<span>    MAmethod <span class="op">=</span> <span class="st">"gregEN"</span>,         <span class="co"># est - model-assisted method</span></span>
<span>    landarea <span class="op">=</span> <span class="st">"FOREST"</span>,         <span class="co"># est - forest land filter</span></span>
<span>    estvar <span class="op">=</span> <span class="va">estvar</span>,             <span class="co"># est - net cubic-foot volume</span></span>
<span>    estvar.filter <span class="op">=</span> <span class="va">live_trees</span>,  <span class="co"># est - live trees only</span></span>
<span>    returntitle <span class="op">=</span> <span class="cn">TRUE</span>           <span class="co"># out - return title information</span></span>
<span>    <span class="op">)</span></span></code></pre></div>
<p>We can again see that the structure of the list is very similar to
that in the above example:</p>
<div class="sourceCode" id="cb78"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">tree2</span>, max.level <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">## List of 5</span></span>
<span><span class="co">##  $ est     :Classes 'data.table' and 'data.frame':   1 obs. of  3 variables:</span></span>
<span><span class="co">##   ..$ ONEUNIT               : num 1</span></span>
<span><span class="co">##   ..$ Estimate              : num 1.32e+09</span></span>
<span><span class="co">##   ..$ Percent Sampling Error: num 14.9</span></span>
<span><span class="co">##   ..- attr(*, ".internal.selfref")=&lt;externalptr&gt; </span></span>
<span><span class="co">##   ..- attr(*, "sorted")= chr "ONEUNIT"</span></span>
<span><span class="co">##  $ titlelst:List of 10</span></span>
<span><span class="co">##   ..$ title.estpse : chr "Net volume of live trees (at least 5 in dia), in cubic feet, and percent sampling error on forest land live"</span></span>
<span><span class="co">##   ..$ title.yvar   : chr "Net volume, in cubic feet"</span></span>
<span><span class="co">##   ..$ title.estvar : chr "Net volume of live trees (at least 5 in dia)"</span></span>
<span><span class="co">##   ..$ title.unitvar: chr "ONEUNIT"</span></span>
<span><span class="co">##   ..$ title.ref    : chr "Wyoming, 2011-2013"</span></span>
<span><span class="co">##   ..$ outfn.estpse : chr "tree_VOLCFNET_live_forestland"</span></span>
<span><span class="co">##   ..$ outfn.rawdat : chr "tree_VOLCFNET_live_forestland_rawdata"</span></span>
<span><span class="co">##   ..$ outfn.param  : chr "tree_VOLCFNET_live_forestland_parameters"</span></span>
<span><span class="co">##   ..$ title.tot    : chr "Net volume of live trees (at least 5 in dia), in cubic feet, on forest land live; Wyoming, 2011-2013"</span></span>
<span><span class="co">##   ..$ title.unitsn : chr "cubic feet"</span></span>
<span><span class="co">##  $ raw     :List of 13</span></span>
<span><span class="co">##   ..$ unit_totest  :'data.frame':    1 obs. of  18 variables:</span></span>
<span><span class="co">##   ..$ domdat       :'data.frame':    66 obs. of  19 variables:</span></span>
<span><span class="co">##   ..$ plotweights  :List of 1</span></span>
<span><span class="co">##   ..$ estvar       : chr "VOLCFNET"</span></span>
<span><span class="co">##   ..$ estvar.filter: chr "STATUSCD == 1"</span></span>
<span><span class="co">##   ..$ module       : chr "MA"</span></span>
<span><span class="co">##   ..$ esttype      : chr "TREE"</span></span>
<span><span class="co">##   ..$ MAmethod     : chr "gregEN"</span></span>
<span><span class="co">##   ..$ predselectlst:List of 1</span></span>
<span><span class="co">##   ..$ rowvar       : chr "TOTAL"</span></span>
<span><span class="co">##   ..$ colvar       : chr "NONE"</span></span>
<span><span class="co">##   ..$ areaunits    : chr "acres"</span></span>
<span><span class="co">##   ..$ estunits     : num 1</span></span>
<span><span class="co">##  $ statecd : int 56</span></span>
<span><span class="co">##  $ invyr   : int [1:3] 2011 2012 2013</span></span></code></pre>
</details><p>However now the <code>raw</code> list has an item call
<code>predselectlst</code>. We can look at this item now:</p>
<div class="sourceCode" id="cb80"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tree2</span><span class="op">$</span><span class="va">raw</span><span class="op">$</span><span class="va">predselectlst</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">## $totest</span></span>
<span><span class="co">##    ONEUNIT TOTAL       dem       slp  asp_cos asp_sin    fornf2</span></span>
<span><span class="co">## 1:       1     1 0.6174634 -62.02041 19.55278  -507.6 -1313.762</span></span></code></pre>
</details><p>Notably, we can see that [INSERT CORRECT PREDS] <code>dem</code>,
<code>slp</code>, <code>asp_cos</code>, and <code>asp_sin</code> were
removed from the model.</p>
</details>
</div>
<div class="section level4">
<h4 id="example-8-net-cubic-foot-volume-of-live-trees-by-forest-type-wyoming-2011-2013">Example 8: Net cubic-foot volume of live trees by forest type,
Wyoming, 2011-2013<a class="anchor" aria-label="anchor" href="#example-8-net-cubic-foot-volume-of-live-trees-by-forest-type-wyoming-2011-2013"></a>
</h4>
<details><summary>
View Example
</summary><p>This example adds rows to the output for net cubic-foot volume of
live trees (at least 5 inches diameter) by forest type, Wyoming,
2011-2013. We also choose to return titles with
<code>returntitle = TRUE</code>.</p>
<div class="sourceCode" id="cb82"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tree3</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/modMAtree.html">modMAtree</a></span><span class="op">(</span></span>
<span>    MApopdat <span class="op">=</span> <span class="va">MApopdat</span>,         <span class="co"># pop - population calculations</span></span>
<span>    MAmethod <span class="op">=</span> <span class="st">"greg"</span>,           <span class="co"># est - model-assisted method</span></span>
<span>    landarea <span class="op">=</span> <span class="st">"FOREST"</span>,         <span class="co"># est - forest land filter</span></span>
<span>    estvar <span class="op">=</span> <span class="st">"VOLCFNET"</span>,               <span class="co"># est - net cubic-foot volume</span></span>
<span>    estvar.filter <span class="op">=</span> <span class="st">"STATUSCD == 1"</span>,   <span class="co"># est - live trees only</span></span>
<span>    rowvar <span class="op">=</span> <span class="st">"FORTYPCD"</span>,         <span class="co"># est - row domain </span></span>
<span>    returntitle <span class="op">=</span> <span class="cn">TRUE</span>           <span class="co"># out - return title information</span></span>
<span>    <span class="op">)</span></span></code></pre></div>
<p>Again, we investigate the output of the returned list:</p>
<div class="sourceCode" id="cb83"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## Look at output list</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">tree3</span><span class="op">)</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">## [1] "est"      "titlelst" "raw"      "statecd"  "invyr"</span></span></code></pre>
</details><div class="sourceCode" id="cb85"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## Estimate and percent sampling error of estimate</span></span>
<span><span class="va">tree3</span><span class="op">$</span><span class="va">est</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">##   Forest type     Estimate Percent Sampling Error</span></span>
<span><span class="co">## 1         201   15329084.7                  63.95</span></span>
<span><span class="co">## 2         265  191806950.6                  70.43</span></span>
<span><span class="co">## 3         266  135152582.5                  66.37</span></span>
<span><span class="co">## 4         268   49388166.9                  73.19</span></span>
<span><span class="co">## 5         281  905200863.5                  19.75</span></span>
<span><span class="co">## 6         901           --                     --</span></span>
<span><span class="co">## 7         999           --                     --</span></span>
<span><span class="co">## 8       Total 1296877648.2                  15.08</span></span></code></pre>
</details><div class="sourceCode" id="cb87"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## Raw data (list object) for estimate</span></span>
<span><span class="va">raw3</span> <span class="op">&lt;-</span> <span class="va">tree3</span><span class="op">$</span><span class="va">raw</span>      <span class="co"># extract raw data list object from output</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">raw3</span><span class="op">)</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">##  [1] "unit_totest"   "unit_rowest"   "domdat"        "plotweights"  </span></span>
<span><span class="co">##  [5] "estvar"        "estvar.filter" "module"        "esttype"      </span></span>
<span><span class="co">##  [9] "MAmethod"      "predselectlst" "rowvar"        "colvar"       </span></span>
<span><span class="co">## [13] "areaunits"     "estunits"</span></span></code></pre>
</details><div class="sourceCode" id="cb89"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">raw3</span><span class="op">$</span><span class="va">unit_totest</span><span class="op">)</span>   <span class="co"># estimates by estimation unit (i.e., ESTN_UNIT)</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">##   ONEUNIT     nhat nhat.var NBRPLT NBRPLT.gt0 ACRES_GIS AREAUSED        est</span></span>
<span><span class="co">## 1       1 1165.825  30923.7     56         34   1112412  1112412 1296877648</span></span>
<span><span class="co">##        est.var    est.se    est.cv      pse  CI99left  CI99right  CI95left</span></span>
<span><span class="co">## 1 3.826688e+16 195619213 0.1508386 15.08386 792995947 1800759350 913471036</span></span>
<span><span class="co">##    CI95right   CI68left  CI68right</span></span>
<span><span class="co">## 1 1680284261 1102342580 1491412717</span></span></code></pre>
</details><div class="sourceCode" id="cb91"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">raw3</span><span class="op">$</span><span class="va">totest</span><span class="op">)</span>        <span class="co"># estimates for population (i.e., WY)</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">## NULL</span></span></code></pre>
</details><div class="sourceCode" id="cb93"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">raw3</span><span class="op">$</span><span class="va">unit_rowest</span><span class="op">)</span>   <span class="co"># estimates by row, by estimation unit (i.e., ESTN_UNIT)</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">##   ONEUNIT Forest type      nhat    nhat.var NBRPLT NBRPLT.gt0 ACRES_GIS</span></span>
<span><span class="co">## 1       1         201  13.78004    77.64629     56          2   1112412</span></span>
<span><span class="co">## 2       1         265 172.42433 14746.63678     56          4   1112412</span></span>
<span><span class="co">## 3       1         266 121.49504  6501.78676     56          5   1112412</span></span>
<span><span class="co">## 4       1         268  44.39736  1055.90466     56          2   1112412</span></span>
<span><span class="co">## 5       1         281 813.72781 25826.51205     56         23   1112412</span></span>
<span><span class="co">## 6       1         901   0.00000     0.00000     56          0   1112412</span></span>
<span><span class="co">##   AREAUSED       est      est.var    est.se    est.cv      pse  CI99left</span></span>
<span><span class="co">## 1  1112412  15329085 9.608428e+13   9802259 0.6394549 63.94549         0</span></span>
<span><span class="co">## 2  1112412 191806951 1.824839e+16 135086607 0.7042842 70.42842         0</span></span>
<span><span class="co">## 3  1112412 135152582 8.045709e+15  89697877 0.6636786 66.36786         0</span></span>
<span><span class="co">## 4  1112412  49388167 1.306641e+15  36147491 0.7319059 73.19059         0</span></span>
<span><span class="co">## 5  1112412 905200864 3.195931e+16 178771664 0.1974939 19.74939 444715574</span></span>
<span><span class="co">## 6  1112412         0 0.000000e+00         0       NaN      NaN         0</span></span>
<span><span class="co">##    CI99right  CI95left  CI95right  CI68left  CI68right</span></span>
<span><span class="co">## 1   40578030         0   34541159   5581151   25077018</span></span>
<span><span class="co">## 2  539766992         0  456571836  57469009  326144892</span></span>
<span><span class="co">## 3  366199002         0  310957191  45951822  224353343</span></span>
<span><span class="co">## 4  142497933         0  120235947  13441010   85335324</span></span>
<span><span class="co">## 5 1365686153 554814841 1255586886 727419973 1082981754</span></span>
<span><span class="co">## 6          0         0          0         0          0</span></span></code></pre>
</details><div class="sourceCode" id="cb95"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">raw3</span><span class="op">$</span><span class="va">rowest</span><span class="op">)</span>        <span class="co"># estimates by row for population (i.e., WY)</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">## NULL</span></span></code></pre>
</details><div class="sourceCode" id="cb97"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## Titles (list object) for estimate</span></span>
<span><span class="va">titlelst3</span> <span class="op">&lt;-</span> <span class="va">tree3</span><span class="op">$</span><span class="va">titlelst</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">titlelst3</span><span class="op">)</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">##  [1] "title.estpse"  "title.yvar"    "title.estvar"  "title.unitvar"</span></span>
<span><span class="co">##  [5] "title.ref"     "outfn.estpse"  "outfn.rawdat"  "outfn.param"  </span></span>
<span><span class="co">##  [9] "title.rowvar"  "title.row"     "title.unitsn"</span></span></code></pre>
</details><div class="sourceCode" id="cb99"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">titlelst3</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">## $title.estpse</span></span>
<span><span class="co">## [1] "Net volume of live trees (at least 5 in dia), in cubic feet, and percent sampling error on forest land by forest type live"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $title.yvar</span></span>
<span><span class="co">## [1] "Net volume, in cubic feet"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $title.estvar</span></span>
<span><span class="co">## [1] "Net volume of live trees (at least 5 in dia)"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $title.unitvar</span></span>
<span><span class="co">## [1] "ONEUNIT"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $title.ref</span></span>
<span><span class="co">## [1] "Wyoming, 2011-2013"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $outfn.estpse</span></span>
<span><span class="co">## [1] "tree_VOLCFNET_live_FORTYPCD_forestland"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $outfn.rawdat</span></span>
<span><span class="co">## [1] "tree_VOLCFNET_live_FORTYPCD_forestland_rawdata"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $outfn.param</span></span>
<span><span class="co">## [1] "tree_VOLCFNET_live_FORTYPCD_forestland_parameters"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $title.rowvar</span></span>
<span><span class="co">## [1] "Forest type"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $title.row</span></span>
<span><span class="co">## [1] "Net volume of live trees (at least 5 in dia), in cubic feet, on forest land by forest type live; Wyoming, 2011-2013"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $title.unitsn</span></span>
<span><span class="co">## [1] "cubic feet"</span></span></code></pre>
</details><p>We can also create a simple barplot from the output:</p>
<div class="sourceCode" id="cb101"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## Create barplot</span></span>
<span><span class="fu"><a href="../reference/datBarplot.html">datBarplot</a></span><span class="op">(</span></span>
<span>      <span class="va">raw3</span><span class="op">$</span><span class="va">unit_rowest</span>, </span>
<span>      xvar <span class="op">=</span> <span class="va">titlelst3</span><span class="op">$</span><span class="va">title.rowvar</span>, </span>
<span>      yvar <span class="op">=</span> <span class="st">"est"</span></span>
<span>      <span class="op">)</span></span></code></pre></div>
<details><summary>
plot
</summary><p><img src="FIESTA_tutorial_MA_files/figure-html/unnamed-chunk-28-1.png" width="700"></p>
</details><p>And a fancier barplot:</p>
<div class="sourceCode" id="cb102"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## Create fancier barplot</span></span>
<span><span class="fu"><a href="../reference/datBarplot.html">datBarplot</a></span><span class="op">(</span></span>
<span>      <span class="va">raw3</span><span class="op">$</span><span class="va">unit_rowest</span>, </span>
<span>      xvar <span class="op">=</span> <span class="va">titlelst3</span><span class="op">$</span><span class="va">title.rowvar</span>, </span>
<span>      yvar <span class="op">=</span> <span class="st">"est"</span>,</span>
<span>      errbars <span class="op">=</span> <span class="cn">TRUE</span>, </span>
<span>      sevar <span class="op">=</span> <span class="st">"est.se"</span>, </span>
<span>      main <span class="op">=</span> <span class="fu">FIESTAutils</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/FIESTAutils/man/internal_desc.html" class="external-link">wraptitle</a></span><span class="op">(</span><span class="va">titlelst3</span><span class="op">$</span><span class="va">title.row</span>, <span class="fl">75</span><span class="op">)</span>,</span>
<span>      ylabel <span class="op">=</span> <span class="va">titlelst3</span><span class="op">$</span><span class="va">title.yvar</span>, </span>
<span>      divideby <span class="op">=</span> <span class="st">"million"</span></span>
<span>      <span class="op">)</span></span></code></pre></div>
<details><summary>
plot
</summary><p><img src="FIESTA_tutorial_MA_files/figure-html/unnamed-chunk-29-1.png" width="700"></p>
</details></details>
</div>
<div class="section level4">
<h4 id="example-9-net-cubic-foot-volume-of-live-trees-by-forest-type-and-stand-size-class-wyoming-2011-2013">Example 9: Net cubic-foot volume of live trees by forest type and
stand-size class, Wyoming, 2011-2013<a class="anchor" aria-label="anchor" href="#example-9-net-cubic-foot-volume-of-live-trees-by-forest-type-and-stand-size-class-wyoming-2011-2013"></a>
</h4>
<details><summary>
View Example
</summary><p>This examples adds rows and columns to the output, including FIA
names, for net cubic-foot volume of live trees (at least 5 inches
diameter) by forest type and stand-size class, Wyoming, 2011-2013. We
also use the <code>*_options</code> functions to return output with
estimates (est) and percent standard error (pse) in same cell - est(pse)
with <code>allin1 = TRUE</code> and save data to an outfolder with
<code>savedata = TRUE</code> and <code>outfolder = outfolder</code>.</p>
<div class="sourceCode" id="cb103"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tree4</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/modMAtree.html">modMAtree</a></span><span class="op">(</span></span>
<span>    MApopdat <span class="op">=</span> <span class="va">MApopdat</span>,         <span class="co"># pop - population calculations</span></span>
<span>    MAmethod <span class="op">=</span> <span class="st">"greg"</span>,           <span class="co"># est - model-assisted method</span></span>
<span>    landarea <span class="op">=</span> <span class="st">"FOREST"</span>,         <span class="co"># est - forest land filter</span></span>
<span>    estvar <span class="op">=</span> <span class="st">"VOLCFNET"</span>,               <span class="co"># est - net cubic-foot volume</span></span>
<span>    estvar.filter <span class="op">=</span> <span class="st">"STATUSCD  == 1"</span>,   <span class="co"># est - live trees only</span></span>
<span>    rowvar <span class="op">=</span> <span class="st">"FORTYPCD"</span>,         <span class="co"># est - row domain</span></span>
<span>    colvar <span class="op">=</span> <span class="st">"STDSZCD"</span>,          <span class="co"># est - column domain</span></span>
<span>    returntitle <span class="op">=</span> <span class="cn">TRUE</span>,          <span class="co"># out - return title information</span></span>
<span>    savedata <span class="op">=</span> <span class="cn">TRUE</span>,             <span class="co"># out - save data to outfolder</span></span>
<span>    table_opts <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/FIESTAutils/man/table_options.html" class="external-link">table_options</a></span><span class="op">(</span></span>
<span>      row.FIAname <span class="op">=</span> <span class="cn">TRUE</span>,          <span class="co"># est - row domain names</span></span>
<span>      col.FIAname <span class="op">=</span> <span class="cn">TRUE</span>,          <span class="co"># est - column domain names</span></span>
<span>      allin1 <span class="op">=</span> <span class="cn">TRUE</span>                <span class="co"># out - return output with est(pse)</span></span>
<span>    <span class="op">)</span>,</span>
<span>    savedata_opts <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/FIESTAutils/man/savedata_options.html" class="external-link">savedata_options</a></span><span class="op">(</span></span>
<span>      outfolder <span class="op">=</span> <span class="va">outfolder</span>,       <span class="co"># out - outfolder for saving data</span></span>
<span>      outfn.pre <span class="op">=</span> <span class="st">"WY"</span>             <span class="co"># out - prefix for output files</span></span>
<span>      <span class="op">)</span></span>
<span>    <span class="op">)</span></span></code></pre></div>
<p>Again, we investigate the output of the returned list:</p>
<div class="sourceCode" id="cb104"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## Look at output list from modGBarea()</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">tree4</span><span class="op">)</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">## [1] "est"      "pse"      "titlelst" "raw"      "statecd"  "invyr"</span></span></code></pre>
</details><div class="sourceCode" id="cb106"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## Estimate and percent sampling error of estimate</span></span>
<span><span class="va">tree4</span><span class="op">$</span><span class="va">est</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">##                         Forest type         Large diameter</span></span>
<span><span class="co">## 1:                      Douglas-fir  11,866,612.7 ( 79.00)</span></span>
<span><span class="co">## 2:                 Engelmann spruce 149,865,021.5 ( 78.94)</span></span>
<span><span class="co">## 3: Engelmann spruce / subalpine fir 113,586,516.8 ( 78.74)</span></span>
<span><span class="co">## 4:                    Subalpine fir  49,388,166.9 ( 73.19)</span></span>
<span><span class="co">## 5:                   Lodgepole pine 456,907,508.9 ( 34.84)</span></span>
<span><span class="co">## 6:                            Aspen            -- (    --)</span></span>
<span><span class="co">## 7:                       Nonstocked            -- (    --)</span></span>
<span><span class="co">## 8:                            Total 781,613,826.8 ( 23.93)</span></span>
<span><span class="co">##           Medium diameter        Small diameter  Nonstocked</span></span>
<span><span class="co">## 1:            -- (    --)  3,462,472.0 ( 99.12) -- (    --)</span></span>
<span><span class="co">## 2:  41,941,929.1 (175.15)           -- (    --) -- (    --)</span></span>
<span><span class="co">## 3:  16,395,905.1 ( 66.30)  5,170,160.5 ( 71.46) -- (    --)</span></span>
<span><span class="co">## 4:            -- (    --)           -- (    --) -- (    --)</span></span>
<span><span class="co">## 5: 442,719,166.9 ( 21.99)  5,574,187.7 ( 77.89) -- (    --)</span></span>
<span><span class="co">## 6:            -- (    --)           -- (    --) -- (    --)</span></span>
<span><span class="co">## 7:            -- (    --)           -- (    --) -- (    --)</span></span>
<span><span class="co">## 8: 501,057,001.1 ( 23.52) 14,206,820.3 ( 43.06) -- (    --)</span></span>
<span><span class="co">##                       Total</span></span>
<span><span class="co">## 1:    15,329,084.7 ( 63.95)</span></span>
<span><span class="co">## 2:   191,806,950.6 ( 70.43)</span></span>
<span><span class="co">## 3:   135,152,582.5 ( 66.37)</span></span>
<span><span class="co">## 4:    49,388,166.9 ( 73.19)</span></span>
<span><span class="co">## 5:   905,200,863.5 ( 19.75)</span></span>
<span><span class="co">## 6:              -- (    --)</span></span>
<span><span class="co">## 7:              -- (    --)</span></span>
<span><span class="co">## 8: 1,296,877,648.2 ( 15.08)</span></span></code></pre>
</details><div class="sourceCode" id="cb108"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## Raw data (list object) for estimate</span></span>
<span><span class="va">raw4</span> <span class="op">&lt;-</span> <span class="va">tree4</span><span class="op">$</span><span class="va">raw</span>      <span class="co"># extract raw data list object from output</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">raw4</span><span class="op">)</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">##  [1] "unit_totest"   "unit_rowest"   "unit_colest"   "unit_grpest"  </span></span>
<span><span class="co">##  [5] "domdat"        "plotweights"   "estvar"        "estvar.filter"</span></span>
<span><span class="co">##  [9] "module"        "esttype"       "MAmethod"      "predselectlst"</span></span>
<span><span class="co">## [13] "rowvar"        "colvar"        "areaunits"     "estunits"</span></span></code></pre>
</details><div class="sourceCode" id="cb110"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">raw4</span><span class="op">$</span><span class="va">unit_totest</span><span class="op">)</span>   <span class="co"># estimates by estimation unit (i.e., ESTN_UNIT)</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">##   ONEUNIT     nhat nhat.var NBRPLT NBRPLT.gt0 ACRES_GIS AREAUSED        est</span></span>
<span><span class="co">## 1       1 1165.825  30923.7     56         34   1112412  1112412 1296877648</span></span>
<span><span class="co">##        est.var    est.se    est.cv      pse  CI99left  CI99right  CI95left</span></span>
<span><span class="co">## 1 3.826688e+16 195619213 0.1508386 15.08386 792995947 1800759350 913471036</span></span>
<span><span class="co">##    CI95right   CI68left  CI68right</span></span>
<span><span class="co">## 1 1680284261 1102342580 1491412717</span></span></code></pre>
</details><div class="sourceCode" id="cb112"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">raw4</span><span class="op">$</span><span class="va">totest</span><span class="op">)</span>        <span class="co"># estimates for population (i.e., WY)</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">## NULL</span></span></code></pre>
</details><div class="sourceCode" id="cb114"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">raw4</span><span class="op">$</span><span class="va">unit_rowest</span><span class="op">)</span>   <span class="co"># estimates by row, by estimation unit (i.e., ESTN_UNIT)</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">##   ONEUNIT                      Forest type      nhat    nhat.var NBRPLT</span></span>
<span><span class="co">## 1       1                      Douglas-fir  13.78004    77.64629     56</span></span>
<span><span class="co">## 2       1                 Engelmann spruce 172.42433 14746.63678     56</span></span>
<span><span class="co">## 3       1 Engelmann spruce / subalpine fir 121.49504  6501.78676     56</span></span>
<span><span class="co">## 4       1                    Subalpine fir  44.39736  1055.90466     56</span></span>
<span><span class="co">## 5       1                   Lodgepole pine 813.72781 25826.51205     56</span></span>
<span><span class="co">## 6       1                            Aspen   0.00000     0.00000     56</span></span>
<span><span class="co">##   NBRPLT.gt0 FORTYPCD ACRES_GIS AREAUSED       est      est.var    est.se</span></span>
<span><span class="co">## 1          2      201   1112412  1112412  15329085 9.608428e+13   9802259</span></span>
<span><span class="co">## 2          4      265   1112412  1112412 191806951 1.824839e+16 135086607</span></span>
<span><span class="co">## 3          5      266   1112412  1112412 135152582 8.045709e+15  89697877</span></span>
<span><span class="co">## 4          2      268   1112412  1112412  49388167 1.306641e+15  36147491</span></span>
<span><span class="co">## 5         23      281   1112412  1112412 905200864 3.195931e+16 178771664</span></span>
<span><span class="co">## 6          0      901   1112412  1112412         0 0.000000e+00         0</span></span>
<span><span class="co">##      est.cv      pse  CI99left  CI99right  CI95left  CI95right  CI68left</span></span>
<span><span class="co">## 1 0.6394549 63.94549         0   40578030         0   34541159   5581151</span></span>
<span><span class="co">## 2 0.7042842 70.42842         0  539766992         0  456571836  57469009</span></span>
<span><span class="co">## 3 0.6636786 66.36786         0  366199002         0  310957191  45951822</span></span>
<span><span class="co">## 4 0.7319059 73.19059         0  142497933         0  120235947  13441010</span></span>
<span><span class="co">## 5 0.1974939 19.74939 444715574 1365686153 554814841 1255586886 727419973</span></span>
<span><span class="co">## 6       NaN      NaN         0          0         0          0         0</span></span>
<span><span class="co">##    CI68right</span></span>
<span><span class="co">## 1   25077018</span></span>
<span><span class="co">## 2  326144892</span></span>
<span><span class="co">## 3  224353343</span></span>
<span><span class="co">## 4   85335324</span></span>
<span><span class="co">## 5 1082981754</span></span>
<span><span class="co">## 6          0</span></span></code></pre>
</details><div class="sourceCode" id="cb116"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">raw4</span><span class="op">$</span><span class="va">rowest</span><span class="op">)</span>        <span class="co"># estimates by row for population (i.e., WY)</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">## NULL</span></span></code></pre>
</details><div class="sourceCode" id="cb118"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">raw4</span><span class="op">$</span><span class="va">unit_colest</span><span class="op">)</span>   <span class="co"># estimates by column, by estimation unit (i.e., ESTN_UNIT)</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">##   ONEUNIT Stand-size class      nhat    nhat.var NBRPLT NBRPLT.gt0 STDSZCD</span></span>
<span><span class="co">## 1       1   Large diameter 702.62958 28262.84167     56         18       1</span></span>
<span><span class="co">## 2       1  Medium diameter 450.42380 11221.16423     56         14       2</span></span>
<span><span class="co">## 3       1   Small diameter  12.77118    30.23649     56          4       3</span></span>
<span><span class="co">## 4       1       Nonstocked   0.00000     0.00000     56          0       5</span></span>
<span><span class="co">##   ACRES_GIS AREAUSED       est      est.var    est.se    est.cv      pse</span></span>
<span><span class="co">## 1   1112412  1112412 781613827 3.497417e+16 187013826 0.2392663 23.92663</span></span>
<span><span class="co">## 2   1112412  1112412 501057001 1.388576e+16 117837837 0.2351785 23.51785</span></span>
<span><span class="co">## 3   1112412  1112412  14206820 3.741649e+13   6116902 0.4305609 43.05609</span></span>
<span><span class="co">## 4   1112412  1112412         0 0.000000e+00         0       NaN      NaN</span></span>
<span><span class="co">##    CI99left  CI99right  CI95left  CI95right  CI68left CI68right</span></span>
<span><span class="co">## 1 299898133 1263329520 415073463 1148154191 595636453 967591201</span></span>
<span><span class="co">## 2 197526847  804587155 270099085  732014918 383872235 618241767</span></span>
<span><span class="co">## 3         0   29962915   2217913   26195727   8123819  20289821</span></span>
<span><span class="co">## 4         0          0         0          0         0         0</span></span></code></pre>
</details><div class="sourceCode" id="cb120"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">raw4</span><span class="op">$</span><span class="va">colest</span><span class="op">)</span>        <span class="co"># estimates by column for population (i.e., WY)</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">## NULL</span></span></code></pre>
</details><div class="sourceCode" id="cb122"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">raw4</span><span class="op">$</span><span class="va">unit_grpest</span><span class="op">)</span>   <span class="co"># estimates by row and column, by estimation unit (i.e., ESTN_UNIT)</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">##   ONEUNIT                                           grpvar      nhat</span></span>
<span><span class="co">## 1       1                       Douglas-fir#Large diameter  10.66746</span></span>
<span><span class="co">## 2       1                       Douglas-fir#Small diameter   3.11258</span></span>
<span><span class="co">## 3       1                  Engelmann spruce#Large diameter 134.72075</span></span>
<span><span class="co">## 4       1                 Engelmann spruce#Medium diameter  37.70358</span></span>
<span><span class="co">## 5       1  Engelmann spruce / subalpine fir#Large diameter 102.10828</span></span>
<span><span class="co">## 6       1 Engelmann spruce / subalpine fir#Medium diameter  14.73905</span></span>
<span><span class="co">##       nhat.var NBRPLT NBRPLT.gt0                      Forest type</span></span>
<span><span class="co">## 1    71.021071     56          1                      Douglas-fir</span></span>
<span><span class="co">## 2     9.518513     56          1                      Douglas-fir</span></span>
<span><span class="co">## 3 11310.014570     56          3                 Engelmann spruce</span></span>
<span><span class="co">## 4  4361.052579     56          1                 Engelmann spruce</span></span>
<span><span class="co">## 5  6464.613685     56          3 Engelmann spruce / subalpine fir</span></span>
<span><span class="co">## 6    95.500443     56          1 Engelmann spruce / subalpine fir</span></span>
<span><span class="co">##   Stand-size class STDSZCD FORTYPCD ACRES_GIS AREAUSED       est      est.var</span></span>
<span><span class="co">## 1   Large diameter       1      201   1112412  1112412  11866613 8.788582e+13</span></span>
<span><span class="co">## 2   Small diameter       3      201   1112412  1112412   3462472 1.177879e+13</span></span>
<span><span class="co">## 3   Large diameter       1      265   1112412  1112412 149865022 1.399570e+16</span></span>
<span><span class="co">## 4  Medium diameter       2      265   1112412  1112412  41941929 5.396634e+15</span></span>
<span><span class="co">## 5   Large diameter       1      266   1112412  1112412 113586517 7.999709e+15</span></span>
<span><span class="co">## 6  Medium diameter       2      266   1112412  1112412  16395905 1.181781e+14</span></span>
<span><span class="co">##      est.se    est.cv       pse CI99left CI99right CI95left CI95right</span></span>
<span><span class="co">## 1   9374744 0.7900101  79.00101        0  36014353        0  30240773</span></span>
<span><span class="co">## 2   3432024 0.9912064  99.12064        0  12302781        0  10189116</span></span>
<span><span class="co">## 3 118303443 0.7894000  78.94000        0 454594497        0 381735510</span></span>
<span><span class="co">## 4  73461783 1.7515118 175.15118        0 231166942        0 185924378</span></span>
<span><span class="co">## 5  89441092 0.7874270  78.74270        0 343971502        0 288887835</span></span>
<span><span class="co">## 6  10870975 0.6630299  66.30299        0  44397681        0  37702625</span></span>
<span><span class="co">##      CI68left CI68right</span></span>
<span><span class="co">## 1  2543824.72  21189401</span></span>
<span><span class="co">## 2    49468.39   6875476</span></span>
<span><span class="co">## 3 32217229.75 267512813</span></span>
<span><span class="co">## 4        0.00 114996578</span></span>
<span><span class="co">## 5 24641118.08 202531916</span></span>
<span><span class="co">## 6  5585178.40  27206632</span></span></code></pre>
</details><div class="sourceCode" id="cb124"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">raw4</span><span class="op">$</span><span class="va">grpest</span><span class="op">)</span>        <span class="co"># estimates by row and column for population (i.e., WY)</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">## NULL</span></span></code></pre>
</details><div class="sourceCode" id="cb126"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## Titles (list object) for estimate</span></span>
<span><span class="va">titlelst4</span> <span class="op">&lt;-</span> <span class="va">tree4</span><span class="op">$</span><span class="va">titlelst</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">titlelst4</span><span class="op">)</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">##  [1] "title.estpse"  "title.yvar"    "title.estvar"  "title.unitvar"</span></span>
<span><span class="co">##  [5] "title.ref"     "outfn.estpse"  "outfn.rawdat"  "outfn.param"  </span></span>
<span><span class="co">##  [9] "title.rowvar"  "title.row"     "title.colvar"  "title.col"    </span></span>
<span><span class="co">## [13] "title.unitsn"</span></span></code></pre>
</details><div class="sourceCode" id="cb128"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">titlelst4</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">## $title.estpse</span></span>
<span><span class="co">## [1] "Net volume of live trees (at least 5 in dia), in cubic feet (percent sampling error), by forest type and stand-size class on forest land live"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $title.yvar</span></span>
<span><span class="co">## [1] "Net volume, in cubic feet"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $title.estvar</span></span>
<span><span class="co">## [1] "Net volume of live trees (at least 5 in dia)"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $title.unitvar</span></span>
<span><span class="co">## [1] "ONEUNIT"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $title.ref</span></span>
<span><span class="co">## [1] "Wyoming, 2011-2013"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $outfn.estpse</span></span>
<span><span class="co">## [1] "WY_tree_VOLCFNET_live_FORTYPNM_STDSZNM_forestland"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $outfn.rawdat</span></span>
<span><span class="co">## [1] "WY_tree_VOLCFNET_live_FORTYPNM_STDSZNM_forestland_rawdata"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $outfn.param</span></span>
<span><span class="co">## [1] "WY_tree_VOLCFNET_live_FORTYPNM_STDSZNM_forestland_parameters"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $title.rowvar</span></span>
<span><span class="co">## [1] "Forest type"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $title.row</span></span>
<span><span class="co">## [1] "Net volume of live trees (at least 5 in dia), in cubic feet (percent sampling error), by forest type on forest land live; Wyoming, 2011-2013"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $title.colvar</span></span>
<span><span class="co">## [1] "Stand-size class"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $title.col</span></span>
<span><span class="co">## [1] "Net volume of live trees (at least 5 in dia), in cubic feet (percent sampling error), by stand-size class on forest land live; Wyoming, 2011-2013"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $title.unitsn</span></span>
<span><span class="co">## [1] "cubic feet"</span></span></code></pre>
</details><div class="sourceCode" id="cb130"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## List output files in outfolder</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/list.files.html" class="external-link">list.files</a></span><span class="op">(</span><span class="va">outfolder</span>, pattern <span class="op">=</span> <span class="st">"WY_tree"</span><span class="op">)</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">## [1] "WY_tree_VOLCFNET_live_FORTYPNM_STDSZNM_forestland_modMA_mase_greg.csv"</span></span></code></pre>
</details><div class="sourceCode" id="cb132"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/list.files.html" class="external-link">list.files</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">outfolder</span>, <span class="st">"/rawdata"</span><span class="op">)</span>, pattern <span class="op">=</span> <span class="st">"WY_tree"</span><span class="op">)</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">## [1] "WY_tree_VOLCFNET_live_FORTYPNM_STDSZNM_forestland_rawdata_modMA_mase_greg_domdat.csv"     </span></span>
<span><span class="co">## [2] "WY_tree_VOLCFNET_live_FORTYPNM_STDSZNM_forestland_rawdata_modMA_mase_greg_unit_colest.csv"</span></span>
<span><span class="co">## [3] "WY_tree_VOLCFNET_live_FORTYPNM_STDSZNM_forestland_rawdata_modMA_mase_greg_unit_grpest.csv"</span></span>
<span><span class="co">## [4] "WY_tree_VOLCFNET_live_FORTYPNM_STDSZNM_forestland_rawdata_modMA_mase_greg_unit_rowest.csv"</span></span>
<span><span class="co">## [5] "WY_tree_VOLCFNET_live_FORTYPNM_STDSZNM_forestland_rawdata_modMA_mase_greg_unit_totest.csv"</span></span></code></pre>
</details></details>
</div>
<div class="section level4">
<h4 id="example-10-number-of-live-trees-by-species-wyoming-2011-2013">Example 10: Number of live trees by species, Wyoming, 2011-2013<a class="anchor" aria-label="anchor" href="#example-10-number-of-live-trees-by-species-wyoming-2011-2013"></a>
</h4>
<details><summary>
View Example
</summary><p>We can use tree domain in estimation output rows:</p>
<div class="sourceCode" id="cb134"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## Number of live trees (at least 1 inch diameter) by species</span></span>
<span><span class="va">tree5</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/modMAtree.html">modMAtree</a></span><span class="op">(</span></span>
<span>    MApopdat <span class="op">=</span> <span class="va">MApopdat</span>,         <span class="co"># pop - population calculations</span></span>
<span>    MAmethod <span class="op">=</span> <span class="st">"greg"</span>,           <span class="co"># est - model-assisted method</span></span>
<span>    landarea <span class="op">=</span> <span class="st">"FOREST"</span>,         <span class="co"># est - forest land filter</span></span>
<span>    estvar <span class="op">=</span> <span class="st">"TPA_UNADJ"</span>,               <span class="co"># est - number of trees per acre </span></span>
<span>    estvar.filter <span class="op">=</span> <span class="st">"STATUSCD == 1"</span>,    <span class="co"># est - live trees only</span></span>
<span>    rowvar <span class="op">=</span> <span class="st">"SPCD"</span>,             <span class="co"># est - row domain</span></span>
<span>    returntitle <span class="op">=</span> <span class="cn">TRUE</span>,          <span class="co"># out - return title information</span></span>
<span>    table_opts <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/FIESTAutils/man/table_options.html" class="external-link">table_options</a></span><span class="op">(</span>    </span>
<span>      row.FIAname <span class="op">=</span> <span class="cn">TRUE</span>,          <span class="co"># est - row domain names</span></span>
<span>      allin1 <span class="op">=</span> <span class="cn">FALSE</span>               <span class="co"># out - return output with est and pse</span></span>
<span>      <span class="op">)</span></span>
<span>    <span class="op">)</span></span></code></pre></div>
<p>We can also look at the output list and estimates again:</p>
<div class="sourceCode" id="cb135"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## Look at output list</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">tree5</span><span class="op">)</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">## [1] "est"      "titlelst" "raw"      "statecd"  "invyr"</span></span></code></pre>
</details><div class="sourceCode" id="cb137"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## Estimate and percent sampling error of estimate</span></span>
<span><span class="va">tree5</span><span class="op">$</span><span class="va">est</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">##            Species    Estimate Percent Sampling Error</span></span>
<span><span class="co">## 1    subalpine fir  68658860.9                  29.14</span></span>
<span><span class="co">## 2 Engelmann spruce  50806944.2                  29.77</span></span>
<span><span class="co">## 3   lodgepole pine 184898322.4                  18.59</span></span>
<span><span class="co">## 4      limber pine   4461866.7                  90.07</span></span>
<span><span class="co">## 5      Douglas-fir    24655901                  73.84</span></span>
<span><span class="co">## 6    quaking aspen  11153476.9                  73.73</span></span>
<span><span class="co">## 7            Total 344635372.3                  13.07</span></span></code></pre>
</details></details>
</div>
<div class="section level4">
<h4 id="example-11-number-of-live-trees-plus-seedlings-by-species-wyoming-2011-2013">Example 11: Number of live trees (plus seedlings) by species,
Wyoming, 2011-2013<a class="anchor" aria-label="anchor" href="#example-11-number-of-live-trees-plus-seedlings-by-species-wyoming-2011-2013"></a>
</h4>
<details><summary>
View Example
</summary><p>We can also add seedlings.</p>
<p>Note: seedling data are only available for number of trees (estvar =
TPA_UNADJ).</p>
<p>Note: must include seedling data in population data calculations.</p>
<div class="sourceCode" id="cb139"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">MApopdat_seed</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/modMApop.html">modMApop</a></span><span class="op">(</span>popTabs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>tree <span class="op">=</span> <span class="va">WYtree</span>,</span>
<span>                                         cond <span class="op">=</span> <span class="va">WYcond</span>,</span>
<span>                                         seed <span class="op">=</span> <span class="va">WYseed</span><span class="op">)</span>,</span>
<span>                     pltassgn <span class="op">=</span> <span class="va">WYpltassgn</span>,</span>
<span>                     auxdat <span class="op">=</span> <span class="va">modeldat</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb140"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## Number of live trees by species, including seedlings</span></span>
<span><span class="va">tree6</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/modMAtree.html">modMAtree</a></span><span class="op">(</span></span>
<span>    MApopdat <span class="op">=</span> <span class="va">MApopdat_seed</span>,         <span class="co"># pop - population calculations</span></span>
<span>    MAmethod <span class="op">=</span> <span class="st">"greg"</span>,           <span class="co"># est - model-assisted method</span></span>
<span>    estseed <span class="op">=</span> <span class="st">"add"</span>,             <span class="co"># est - add seedling data</span></span>
<span>    landarea <span class="op">=</span> <span class="st">"FOREST"</span>,         <span class="co"># est - forest land filter</span></span>
<span>    estvar <span class="op">=</span> <span class="st">"TPA_UNADJ"</span>,               <span class="co"># est - number of trees per acre </span></span>
<span>    estvar.filter <span class="op">=</span> <span class="st">"STATUSCD == 1"</span>,    <span class="co"># est - live trees only</span></span>
<span>    rowvar <span class="op">=</span> <span class="st">"SPCD"</span>,             <span class="co"># est - row domain</span></span>
<span>    returntitle <span class="op">=</span> <span class="cn">TRUE</span>,          <span class="co"># out - return title information</span></span>
<span>    table_opts <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/FIESTAutils/man/table_options.html" class="external-link">table_options</a></span><span class="op">(</span></span>
<span>      row.FIAname <span class="op">=</span> <span class="cn">TRUE</span>,          <span class="co"># est - row domain names</span></span>
<span>      allin1 <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span>              <span class="co"># out - return output with est and pse</span></span>
<span>    <span class="op">)</span></span></code></pre></div>
<p>And again we can look at our outputs and compare estimates:</p>
<div class="sourceCode" id="cb141"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## Look at output list</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">tree6</span><span class="op">)</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">## [1] "est"      "titlelst" "raw"      "statecd"  "invyr"</span></span></code></pre>
</details><div class="sourceCode" id="cb143"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## Estimate and percent sampling error of estimate</span></span>
<span><span class="va">tree6</span><span class="op">$</span><span class="va">est</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">##            Species    Estimate Percent Sampling Error</span></span>
<span><span class="co">## 1    subalpine fir 396440112.5                  23.94</span></span>
<span><span class="co">## 2 Engelmann spruce 107965157.9                  33.92</span></span>
<span><span class="co">## 3   lodgepole pine 251790363.6                  18.03</span></span>
<span><span class="co">## 4      limber pine  38477186.7                  92.27</span></span>
<span><span class="co">## 5      Douglas-fir  49218941.8                  80.24</span></span>
<span><span class="co">## 6    quaking aspen 105867206.7                  60.84</span></span>
<span><span class="co">## 7            Total 949758969.2                  16.07</span></span></code></pre>
</details><div class="sourceCode" id="cb145"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## Compare estimates with and without seedlings</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">tree5</span><span class="op">$</span><span class="va">est</span><span class="op">)</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">##            Species    Estimate Percent Sampling Error</span></span>
<span><span class="co">## 1    subalpine fir  68658860.9                  29.14</span></span>
<span><span class="co">## 2 Engelmann spruce  50806944.2                  29.77</span></span>
<span><span class="co">## 3   lodgepole pine 184898322.4                  18.59</span></span>
<span><span class="co">## 4      limber pine   4461866.7                  90.07</span></span>
<span><span class="co">## 5      Douglas-fir    24655901                  73.84</span></span>
<span><span class="co">## 6    quaking aspen  11153476.9                  73.73</span></span></code></pre>
</details><div class="sourceCode" id="cb147"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">tree6</span><span class="op">$</span><span class="va">est</span><span class="op">)</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">##            Species    Estimate Percent Sampling Error</span></span>
<span><span class="co">## 1    subalpine fir 396440112.5                  23.94</span></span>
<span><span class="co">## 2 Engelmann spruce 107965157.9                  33.92</span></span>
<span><span class="co">## 3   lodgepole pine 251790363.6                  18.03</span></span>
<span><span class="co">## 4      limber pine  38477186.7                  92.27</span></span>
<span><span class="co">## 5      Douglas-fir  49218941.8                  80.24</span></span>
<span><span class="co">## 6    quaking aspen 105867206.7                  60.84</span></span></code></pre>
</details></details><!-- #### Example 11: Number of seedlings by species, Wyoming, 2011-2013 --><!-- Of course, we can also look at *only* seedlings. --><!-- Note: seedling data are only available for number of trees (estvar = TPA_UNADJ). --><!-- Note: must include seedling data in population data calculations. --><!-- ```{r} --><!-- ## Number of live trees seedlings by species --><!-- tree7 <- modMAtree( --><!--     MApopdat = MApopdat_seed,         # pop - population calculations --><!--     MAmethod = "greg",           # est - model-assisted method --><!--     estseed = "only",            # est - add seedling data --><!--     landarea = "FOREST",         # est - forest land filter --><!--     estvar = "TPA_UNADJ",        # est - number of trees per acre  --><!--     rowvar = "SPCD",             # est - row domain --><!--     returntitle = TRUE,          # out - return title information --><!--     table_opts = table_options( --><!--       row.FIAname = TRUE,          # est - row domain names --><!--       allin1 = FALSE               # out - return output with est and pse --><!--       ) --><!--     ) --><!-- ``` --><!-- And again we can look at our outputs and compare estimates: --><!-- ```{r} --><!-- ## Look at output list --><!-- names(tree7) --><!-- ## Estimate and percent sampling error of estimate --><!-- tree7$est --><!-- ## Compare estimates with, without, and only seedlings --><!-- head(tree5$est) --><!-- head(tree6$est) --><!-- head(tree7$est) --><!-- ``` -->
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Tracey Frescino, Gretchen Moisen, Paul Patterson, Chris Toney, Grayson White.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
